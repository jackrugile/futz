{"version":3,"names":[],"mappings":"","sources":["variaboard.min.js"],"sourcesContent":["!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).VariaBoard=t()}}(function(){return function t(e,i,n){function o(s,r){if(!i[s]){if(!e[s]){var l=\"function\"==typeof require&&require;if(!r&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error(\"Cannot find module '\"+s+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return o(i||t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var a=\"function\"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){\"use strict\";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.variaboard=e,this.id=i.id,this.title=i.title,this.description=i.description,this.callback=void 0!==i.callback?i.callback:function(){},this.createDOM(),this.listen()}return n(t,[{key:\"createDOM\",value:function(){this.dom={},this.dom.control=document.createElement(\"div\"),this.dom.control.classList.add(this.variaboard.namespace+\"-control\"),this.dom.button=document.createElement(\"button\"),this.dom.button.classList.add(this.variaboard.namespace+\"-button\"),this.dom.button.textContent=this.title,this.dom.control.setAttribute(\"title\",this.title+\": \"+this.description),this.dom.control.appendChild(this.dom.button),this.variaboard.dom.controls.appendChild(this.dom.control)}},{key:\"listen\",value:function(){var t=this;this.dom.button.addEventListener(\"click\",function(e){return t.onButtonClick(e)})}},{key:\"onButtonClick\",value:function(){this.callback()}}]),t}();e.exports=o},{}],2:[function(t,e,i){\"use strict\";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.variaboard=e,this.type=i.type,this.id=i.id,this.title=i.title,this.default=i.default,this.randomizable=void 0===i.randomizable||i.randomizable,this.mutable=void 0===i.mutable||i.mutable,this.locked=void 0!==i.locked&&i.locked,this.value=this.default,this.createDOM()}return n(t,[{key:\"createDOM\",value:function(){this.dom={},this.dom.control=document.createElement(\"div\"),this.dom.control.classList.add(this.variaboard.namespace+\"-control\"),this.dom.title=document.createElement(\"label\"),this.dom.title.classList.add(this.variaboard.namespace+\"-control-title\"),this.dom.title.textContent=this.title,this.dom.title.setAttribute(\"for\",this.variaboard.namespace+\"-\"+this.id+\"-\"+this.variaboard.id),this.dom.control.appendChild(this.dom.title),this.dom.value=document.createElement(\"input\"),this.dom.value.classList.add(this.variaboard.namespace+\"-control-value\"),this.dom.value.setAttribute(\"id\",this.variaboard.namespace+\"-\"+this.id+\"-\"+this.variaboard.id),this.dom.control.appendChild(this.dom.value),this.variaboard.dom.controls.appendChild(this.dom.control)}},{key:\"get\",value:function(){return this.value}},{key:\"lock\",value:function(){this.locked=!0}},{key:\"unlock\",value:function(){this.locked=!1}}]),t}();e.exports=o},{}],3:[function(t,e,i){\"use strict\";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=t(\"./control\"),a=t(\"../util/calc\"),s=function(t){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o);function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.type=\"range\",n.min=i.min,n.max=i.max,n.size=n.max-n.min,n.step=void 0!==i.step?Math.abs(i.step):1,n.places=n.step.toString().indexOf(\".\")>-1?n.step.toString().split(\".\")[1].length:0,n.easedValue=n.value,n.easedValueTarget=n.value,n.isMouseDown=!1,n.settled=!1,n.isFocused=!1,n.onWindowResize(),n.listen(),n.set(n.value),n}return n(e,[{key:\"createDOM\",value:function(){(function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if(\"value\"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"createDOM\",this).call(this),this.dom.randomize=document.createElement(\"div\"),this.dom.randomize.classList.add(this.variaboard.namespace+\"-control-randomize\"),this.dom.randomize.setAttribute(\"title\",\"Randomize\"),this.dom.randomize.innerHTML='<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" class=\"'+this.variaboard.namespace+'-control-randomize-svg\"><path d=\"M2 7h-2v-2h2c3.49 0 5.48 1.221 6.822 2.854-.41.654-.754 1.312-1.055 1.939-1.087-1.643-2.633-2.793-5.767-2.793zm16 10c-3.084 0-4.604-1.147-5.679-2.786-.302.627-.647 1.284-1.06 1.937 1.327 1.629 3.291 2.849 6.739 2.849v3l6-4-6-4v3zm0-10v3l6-4-6-4v3c-5.834 0-7.436 3.482-8.85 6.556-1.343 2.921-2.504 5.444-7.15 5.444h-2v2h2c5.928 0 7.543-3.511 8.968-6.609 1.331-2.893 2.479-5.391 7.032-5.391z\"/></svg>',this.dom.control.appendChild(this.dom.randomize),this.dom.mutate=document.createElement(\"div\"),this.dom.mutate.classList.add(this.variaboard.namespace+\"-control-mutate\"),this.dom.mutate.setAttribute(\"title\",\"Mutate\"),this.dom.mutate.innerHTML='<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" class=\"'+this.variaboard.namespace+'-control-mutate-svg\"><path d=\"M20.759 20.498c-2.342-3.663-5.575-6.958-5.743-11.498h-2.016c.173 5.212 3.512 8.539 5.953 12.356.143.302-.068.644-.377.644h-1.264l-4.734-7h-3.52c.873-1.665 1.85-3.414 1.936-6h-2.01c-.169 4.543-3.421 7.864-5.743 11.498-.165.347-.241.707-.241 1.057 0 1.283 1.023 2.445 2.423 2.445h13.153c1.4 0 2.424-1.162 2.424-2.446 0-.35-.076-.709-.241-1.056zm-4.759-15.498c0 1.105-.896 2-2 2s-2-.895-2-2 .896-2 2-2 2 .895 2 2zm-5-1.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5.672-1.5 1.5-1.5 1.5.671 1.5 1.5zm0 3.5c0 .552-.447 1-1 1s-1-.448-1-1 .447-1 1-1 1 .448 1 1zm3-6c0 .552-.447 1-1 1s-1-.448-1-1 .447-1 1-1 1 .448 1 1z\"/></svg>\\n',this.dom.control.appendChild(this.dom.mutate),this.dom.range=document.createElement(\"div\"),this.dom.range.classList.add(this.variaboard.namespace+\"-control-range\"),this.dom.rangeInner=document.createElement(\"div\"),this.dom.rangeInner.classList.add(this.variaboard.namespace+\"-control-range-inner\"),this.dom.range.appendChild(this.dom.rangeInner),this.dom.control.appendChild(this.dom.range)}},{key:\"listen\",value:function(){var t=this;this.dom.value.addEventListener(\"change\",function(e){return t.onValueChange(e)}),this.dom.value.addEventListener(\"focus\",function(e){return t.onValueFocus(e)}),this.dom.value.addEventListener(\"blur\",function(e){return t.onValueBlur(e)}),this.dom.value.addEventListener(\"keydown\",function(e){return t.onValueKeydown(e)}),this.dom.value.addEventListener(\"wheel\",function(e){return t.onValueMousewheel(e)}),this.dom.range.addEventListener(\"mousedown\",function(e){return t.onRangeMousedown(e)}),this.dom.randomize.addEventListener(\"click\",function(e){return t.onRandomizeClick(e)}),this.dom.mutate.addEventListener(\"click\",function(e){return t.onMutateClick(e)})}},{key:\"onValueChange\",value:function(){this.set(this.dom.value.value),this.easedValueTarget=this.value}},{key:\"onValueFocus\",value:function(){this.isFocused=!0}},{key:\"onValueBlur\",value:function(){this.isFocused=!1}},{key:\"onValueKeydown\",value:function(t){var e=t.shiftKey?4*this.step:this.step;switch(t.which){case 38:this.set(this.get()+e);break;case 40:this.set(this.get()-e)}}},{key:\"onValueMousewheel\",value:function(t){if(this.isFocused){var e=t.shiftKey?4*this.step:this.step;t.wheelDelta<0?this.set(this.get()-e):t.wheelDelta>0&&this.set(this.get()+e)}}},{key:\"onRangeMousedown\",value:function(t){this.variaboard.onDragStart(),this.variaboard.mouse.down=!0,this.variaboard.mouse.anchor.x=t.clientX,this.variaboard.mouse.anchor.y=t.clientY,this.isMouseDown=!0,this.dom.control.classList.add(this.variaboard.namespace+\"-control-is-dragging\"),this.setDragValue()}},{key:\"onRandomizeClick\",value:function(){this.randomize()}},{key:\"onMutateClick\",value:function(){this.mutate()}},{key:\"onWindowMouseup\",value:function(){this.variaboard.onDragEnd(),this.isMouseDown=!1,this.dom.control.classList.remove(this.variaboard.namespace+\"-control-is-dragging\")}},{key:\"onWindowMousemove\",value:function(){this.isMouseDown&&this.setDragValue()}},{key:\"onWindowResize\",value:function(){this.bcr=this.dom.range.getBoundingClientRect()}},{key:\"randomize\",value:function(){this.locked||(this.settled=!1,this.easedValue=this.value,this.easedValueTarget=a.roundToNearestInterval(a.rand(this.min,this.max),this.step),cancelAnimationFrame(this.variaboard.raf),this.variaboard.update(),this.dom.control.classList.add(this.variaboard.namespace+\"-control-randomizing\"),this.dom.control.offsetWidth,this.dom.control.classList.remove(this.variaboard.namespace+\"-control-randomizing\"))}},{key:\"mutate\",value:function(){if(!this.locked){var t=this.size/15;this.settled=!1,this.easedValue=this.value,this.easedValueTarget=this.get()+a.rand(-t,t),cancelAnimationFrame(this.variaboard.raf),this.variaboard.update(),this.dom.control.classList.add(this.variaboard.namespace+\"-control-mutating\"),this.dom.control.offsetWidth,this.dom.control.classList.remove(this.variaboard.namespace+\"-control-mutating\")}}},{key:\"setDragValue\",value:function(){this.set(a.map(this.variaboard.mouse.x,this.bcr.left,this.bcr.right,this.min,this.max)),this.easedValueTarget=this.value}},{key:\"easeSet\",value:function(){Math.abs(this.easedValue-this.easedValueTarget)>this.step/2?(this.easedValue+=.2*(this.easedValueTarget-this.easedValue),this.set(this.easedValue)):(this.settled=!0,this.easedValue=this.easedValueTarget,this.value=this.easedValueTarget,this.set(this.value))}},{key:\"set\",value:function(t){t=parseFloat(t),t=isNaN(t)?this.default:t,t=a.clamp(t,this.min,this.max),t=a.roundToNearestInterval(t,this.step),this.value=t,this.dom.value.value=this.value.toFixed(this.places),this.dom.rangeInner.style.transform=\"scaleX(\"+a.map(this.value,this.min,this.max,0,1)+\")\",this.dom.control.setAttribute(\"title\",this.title+\": \"+this.value.toFixed(this.places)),this.variaboard.changeCallback.call(this.variaboard)}}]),e}();e.exports=s},{\"../util/calc\":5,\"./control\":2}],4:[function(t,e,i){\"use strict\";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=t(\"./button\"),a=t(\"./controls/range\"),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.namespace=\"variaboard\",this.id=Math.random().toString(36).substr(2,8),this.controls={},this.buttons={},this.mouse={down:!1,x:0,y:0,anchor:{x:0,y:0}},this.needsUpdate=!1,this.raf=null,this.isDragging=!1,this.container=void 0!==e.container?e.container:document.body,this.class=void 0!==e.class?e.class:null,this.title=void 0!==e.title?e.title:null,this.changeCallback=void 0!==e.changeCallback?e.changeCallback:function(){},this.createDOM(),this.listen()}return n(t,[{key:\"createDOM\",value:function(){this.dom={},this.dom.container=this.container,this.dom.panel=document.createElement(\"div\"),this.dom.panel.classList.add(this.namespace+\"-panel\"),this.class&&this.dom.panel.classList.add(this.class),this.title&&(this.dom.title=document.createElement(\"h1\"),this.dom.title.classList.add(this.namespace+\"-title\"),this.dom.title.textContent=this.title,this.dom.panel.appendChild(this.dom.title)),this.dom.controls=document.createElement(\"div\"),this.dom.controls.classList.add(this.namespace+\"-controls\"),this.dom.panel.appendChild(this.dom.controls),this.dom.container.appendChild(this.dom.panel)}},{key:\"listen\",value:function(){var t=this;window.addEventListener(\"mouseup\",function(e){return t.onWindowMouseup(e)}),window.addEventListener(\"mousemove\",function(e){return t.onWindowMousemove(e)}),window.addEventListener(\"resize\",function(){return t.onWindowResize()})}},{key:\"onWindowMouseup\",value:function(t){this.mouse.down=!1;for(var e in this.controls){this.controls[e].onWindowMouseup(t)}}},{key:\"onWindowMousemove\",value:function(t){this.mouse.x=t.clientX,this.mouse.y=t.clientY;for(var e in this.controls){var i=this.controls[e];i&&i.onWindowMousemove(t)}}},{key:\"onWindowResize\",value:function(){for(var t in this.controls){var e=this.controls[t];e&&e.onWindowResize()}}},{key:\"onDragStart\",value:function(){this.isDragging=!0,this.dom.panel.classList.add(this.namespace+\"-is-dragging\")}},{key:\"onDragEnd\",value:function(){this.isDragging=!1,this.dom.panel.classList.remove(this.namespace+\"-is-dragging\")}},{key:\"update\",value:function(){var t=this;this.needsUpdate=!1;for(var e in this.controls)\"range\"===this.controls[e].type&&(this.controls[e].settled||(this.needsUpdate=!0,this.controls[e].easeSet()));this.needsUpdate&&(this.raf=requestAnimationFrame(function(){return t.update()}))}},{key:\"addButton\",value:function(t){return this.buttons[t.id]=new o(this,t),this}},{key:\"addRange\",value:function(t){return this.controls[t.id]=new a(this,t),this}},{key:\"get\",value:function(t){var e=this.controls[t];if(e)return e.get()}},{key:\"randomize\",value:function(){for(var t in this.controls)this.controls[t].randomize()}},{key:\"mutate\",value:function(){for(var t in this.controls)this.controls[t].mutate()}}]),t}();e.exports=s},{\"./button\":1,\"./controls/range\":3}],5:[function(t,e,i){\"use strict\";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return n(t,null,[{key:\"rand\",value:function(t,e){return void 0===e&&(e=t,t=0),Math.random()*(e-t)+t}},{key:\"clamp\",value:function(t,e,i){return Math.max(Math.min(t,i),e)}},{key:\"map\",value:function(t,e,i,n,o){return(t-e)/(i-e)*(o-n)+n}},{key:\"roundToNearestInterval\",value:function(t,e){return Math.round(t/e)*e}}]),t}();e.exports=o},{}]},{},[4])(4)});"],"file":"../variaboard.min.js"}