{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/futz-button.js","src/js/futz-control.js","src/js/futz-range-control.js","src/js/index.js"],"names":[],"mappings":"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","file":"../futz.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","class FutzButton {\n\n  /**\n   * Create a Futz button\n   */\n\n  constructor(futz, config) {\n    this.futz = futz;\n    this.id = config.id;\n    this.title = config.title;\n    this.callback = config.callback;\n\n    this.createDOM();\n    this.listen();\n  }\n\n  /**\n   * Create necessary DOM elements\n   */\n\n  createDOM() {\n    this.dom = {};\n\n    // control\n    this.dom.control = document.createElement('div');\n    this.dom.control.classList.add(`${this.futz.namespace}-control`);\n\n    // button\n    this.dom.button = document.createElement('button');\n    this.dom.button.classList.add(`${this.futz.namespace}-control-button`);\n    this.dom.button.textContent = this.title;\n    this.dom.control.appendChild(this.dom.button);\n\n    // add control to panel\n    this.futz.dom.controls.appendChild(this.dom.control);\n  }\n\n  /**\n   * Setup event listeners\n   */\n\n  listen() {\n    this.dom.button.addEventListener('click', (e) => this.onButtonClick(e));\n  }\n\n  /**\n   * On button click event\n   *\n   * @param {object} e - Event object\n   */\n\n  onButtonClick(e) {\n    this.callback();\n  }\n\n}\n\nmodule.exports = FutzButton\n","/**\n * Create a Futz control\n */\n\nclass FutzControl {\n\n  constructor(futz, config) {\n    this.futz = futz;\n    this.type = config.type;\n    this.id = config.id;\n    this.title = config.title;\n    this.default = config.default;\n    this.randomizable = config.randomizable !== undefined ? config.locked : true;\n    this.mutable = config.mutable !== undefined ? config.mutable : true;\n    this.locked = config.locked !== undefined ? config.locked : false;\n    this.value = this.default;\n    \n    this.createDOM();\n  }\n\n  createDOM() {\n    this.dom = {};\n    \n    // control\n    this.dom.control = document.createElement('div');\n    this.dom.control.classList.add(`${this.futz.namespace}-control`);\n\n    // title\n    this.dom.title = document.createElement('h3');\n    this.dom.title.classList.add(`${this.futz.namespace}-control-title`);\n    this.dom.title.textContent = this.title;\n    this.dom.control.appendChild(this.dom.title);\n\n    // value\n    this.dom.value = document.createElement('input');\n    this.dom.value.classList.add(`${this.futz.namespace}-control-value`);\n    this.dom.control.appendChild(this.dom.value);\n\n    // add control to panel\n    this.futz.dom.controls.appendChild(this.dom.control);\n  }\n\n  lock() {\n    this.locked = true;\n  }\n\n  unlock() {\n    this.locked = false;\n  }\n\n}\n\nmodule.exports = FutzControl;\n","const FutzControl = require('./futz-control');\n\n/**\n * Create a Futz range control\n *\n * @extends FutzControl\n */\n\nclass FutzRangeControl extends FutzControl {\n\n  constructor(futz, config) {\n    super(futz, config);\n    this.min = config.min;\n    this.max = config.max;\n    this.step = config.step !== undefined ? Math.abs(config.step) : 1;\n    this.places = this.step.toString().indexOf('.') > -1 ? this.step.toString().split('.')[1].length : 0;\n    this.valueTarget = this.value;\n        \n    this.mouseIsDown = false;\n    this.settled = false;\n    \n    this.listen();\n    \n    this.set(this.value);\n  }\n\n  createDOM() {\n    super.createDOM();\n\n    // range\n    this.dom.range = document.createElement('div');\n    this.dom.range.classList.add(`${this.futz.namespace}-control-range`);\n\n    // range inner\n    this.dom.rangeInner = document.createElement('div');\n    this.dom.rangeInner.classList.add(`${this.futz.namespace}-control-range-inner`);\n    this.dom.range.appendChild(this.dom.rangeInner);\n    \n    this.dom.control.appendChild(this.dom.range);\n  }\n\n  listen() {\n    this.dom.value.addEventListener('change', (e) => this.onValueChange(e));\n    this.dom.range.addEventListener('mousedown', (e) => this.onValueMousedown(e));\n  }\n\n  onValueChange(e) {\n    this.set(this.dom.value.value);\n    this.valueTarget = this.value;\n  }\n\n  onValueMousedown(e) {\n    this.futz.mouse.down = true;\n    this.futz.mouse.anchor.x = e.clientX;\n    this.futz.mouse.anchor.y = e.clientY;\n    this.mouseIsDown = true;\n    this.setDragValue();\n  }\n\n  onWindowMouseup(e) {\n    this.mouseIsDown = false;\n  }\n\n  onWindowMousemove(e) {\n    if(this.mouseIsDown) {\n      this.setDragValue();\n    }\n  }\n\n  setDragValue() {\n    let left = this.dom.range.offsetLeft;\n    let width = this.dom.range.offsetWidth;\n    let val = this.futz.map(this.futz.mouse.x, left, left + width, this.min, this.max);\n    this.set(val);\n    this.valueTarget = this.value;\n  }\n\n  easeSet() {\n    if(Math.abs(this.value - this.valueTarget) > this.step / 2) {\n      this.value += (this.valueTarget - this.value) * 0.2;\n      this.set(this.value, true);\n    } else {\n      this.settled = true;\n      this.value = this.valueTarget;\n      this.set(this.value); \n    }\n  }\n\n  set(val, bypassRounding) {\n    // sanitize value\n    val = parseFloat(val);\n    val = isNaN(val) ? this.default : val;\n    val = this.futz.clamp(val, this.min, this.max);\n    val = bypassRounding ? val : this.futz.roundToNearestInterval(val, this.step);\n    this.value = val;\n    \n    // set input value\n    this.dom.value.value = this.value.toFixed(this.places);\n    \n    // set range value\n    this.dom.rangeInner.style.transform = `scaleX(${this.futz.map(this.value, this.min, this.max, 0, 1)})`;\n    \n    // set the title attribute for the control\n    this.dom.control.setAttribute('title', `${this.title}: ${this.value.toFixed(this.places)}`);\n  }\n\n}\n\nmodule.exports = FutzRangeControl;\n","const FutzButton = require('./futz-button');\nconst FutzRangeControl = require('./futz-range-control');\n\nclass Futz {\n\n  /**\n   * Create a Futz control panel\n   *\n   * @param {object} config - Configuration object\n   * @param {object|string} [config.container=document.body] - DOM element or CSS selector\n   * @param {string} [config.title=\"Control Panel\"] - Title of the panel\n   *\n   * @requires {@linkcode FutzButton}\n   * @requires {@linkcode FutzRangeControl}\n   */\n\n  constructor(config) {\n    this.namespace = 'futz';\n    this.controls = {};\n    this.buttons = {};\n\n    this.mouse = {\n      down: false,\n      x: 0,\n      y: 0,\n      anchor: {\n        x: 0,\n        y: 0\n      }\n    }\n\n    this.needsUpdate = false;\n    this.raf = null;\n\n    this.container = config.container !== undefined ? config.container : document.body;\n    this.title = config.title !== undefined ? config.title : 'Futz';\n    \n    this.createDOM();\n    this.listen();\n  }\n\n  /**\n   * Create necessary DOM elements\n   */\n\n  createDOM() {\n    this.dom = {};\n    \n    // container\n    this.dom.container = this.container;\n    \n    // panel\n    this.dom.panel = document.createElement('div');\n    this.dom.panel.classList.add(`${this.namespace}-panel`);\n    \n    // title\n    this.dom.title = document.createElement('h1');\n    this.dom.title.classList.add(`${this.namespace}-title`);\n    this.dom.title.textContent = this.title;\n    this.dom.panel.appendChild(this.dom.title);\n    \n    // controls\n    this.dom.controls = document.createElement('div');\n    this.dom.controls.classList.add(`${this.namespace}-controls`);\n    this.dom.panel.appendChild(this.dom.controls);\n    \n    // add panel to container\n    this.dom.container.appendChild(this.dom.panel);\n  }\n\n  /**\n   * Setup event listeners\n   */\n\n  listen() {\n    window.addEventListener('mouseup', (e) => this.onWindowMouseup(e));\n    window.addEventListener('mousemove', (e) => this.onWindowMousemove(e));\n  }\n\n  /**\n   * On window mouse up event\n   *\n   * @param {object} e - Event object\n   */\n\n  onWindowMouseup(e) {\n    this.mouse.down = false;\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      control.onWindowMouseup(e);\n    }\n  }\n\n  /**\n   * On window mouse move event\n   *\n   * @param {object} e - Event object\n   */\n\n  onWindowMousemove(e) {\n    this.mouse.x = e.clientX;\n    this.mouse.y = e.clientY;\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      control.onWindowMousemove(e);\n    }\n  }\n\n  /**\n   * Update based on requestAnimationFrame()\n   */\n\n  update() {\n    this.needsUpdate = false;\n    for(let key in this.controls) {\n      if(this.controls[key].type === 'range') {\n        this.controls[key].easeSet();\n        if(!this.controls[key].settled) {\n          this.needsUpdate = true;\n        }\n      }\n    }\n\n    if(this.needsUpdate) {\n      this.raf = requestAnimationFrame(() => this.update());\n    }\n  }\n\n  /**\n   * Add a button\n   *\n   * @param {object} config - Configuration object\n   * @param {object} config.id - ID slug\n   * @param {object} config.title - Title text\n   * @param {object} [config.callback=() => {}] - Callback function for button press\n   */\n\n  addButton(config) {\n    for(let key in this.buttons) {\n       if(config.id === this.buttons[key].id) {\n         console.error(`Futz: A button with an id of '${config.id}' is already in use.`); \n         return;\n       }\n    }\n    this.buttons[config.id] = new FutzButton(this, config);\n  }\n\n  addControl(config) {\n    let control = null;\n\n    for(let key in this.controls) {\n       if(config.id === this.controls[key].id) {\n         console.error(`Futz: A control with an id of '${config.id}' is already in use.`); \n         return;\n       }\n    }\n\n    switch(config.type) {\n      case 'range':\n        control = new FutzRangeControl(this, config);\n        break;\n    }\n\n    if(control) {\n      this.controls[control.id] = control; \n    }\n  }\n\n  get(id) {\n    return this.controls[id].value;\n  }\n\n  randomize() {\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      control.settled = false;\n      control.valueTarget = this.rand(control.min, control.max);\n      cancelAnimationFrame(this.raf);\n      this.update();\n    }\n  }\n\n  mutate() {\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      let size = (control.max - control.min) / 15;\n      control.settled = false;\n      if(control.value <= control.min) {\n        control.valueTarget = this.rand(control.step, control.min + size);\n      } else if(control.value >= control.max) {\n        control.valueTarget = this.rand(control.max - size, control.max - control.step);\n      } else {\n        control.valueTarget = control.value + this.rand(-size, size);\n      }\n      cancelAnimationFrame(this.raf);\n      this.update();\n    }\n  }\n\n  rand(min, max, ease) {\n    if(max === undefined) {\n      max = min;\n      min = 0;\n    }\n    let random = Math.random();\n    return random * (max - min) + min;\n  }\n\n  clamp(val, min, max) {\n    return Math.max(Math.min(val, max), min);\n  }\n\n  map(val, inMin, inMax, outMin, outMax) {\n    return ((outMax - outMin) * ((val - inMin) / (inMax - inMin))) + outMin;\n  }\n\n  roundToNearestInterval(value, interval) {\n    return Math.round(value / interval) * interval;\n  }\n\n}\n\nmodule.exports = Futz;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZnV0ei1idXR0b24uanMiLCJzcmMvanMvZnV0ei1jb250cm9sLmpzIiwic3JjL2pzL2Z1dHotcmFuZ2UtY29udHJvbC5qcyIsInNyYy9qcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztJQ0FNLFU7O0FBRUo7Ozs7QUFJQSxzQkFBWSxJQUFaLEVBQWtCLE1BQWxCLEVBQTBCO0FBQUE7O0FBQ3hCLFNBQUssSUFBTCxHQUFZLElBQVo7QUFDQSxTQUFLLEVBQUwsR0FBVSxPQUFPLEVBQWpCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsT0FBTyxLQUFwQjtBQUNBLFNBQUssUUFBTCxHQUFnQixPQUFPLFFBQXZCOztBQUVBLFNBQUssU0FBTDtBQUNBLFNBQUssTUFBTDtBQUNEOztBQUVEOzs7Ozs7Z0NBSVk7QUFDVixXQUFLLEdBQUwsR0FBVyxFQUFYOztBQUVBO0FBQ0EsV0FBSyxHQUFMLENBQVMsT0FBVCxHQUFtQixTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBbkI7QUFDQSxXQUFLLEdBQUwsQ0FBUyxPQUFULENBQWlCLFNBQWpCLENBQTJCLEdBQTNCLENBQWtDLEtBQUssSUFBTCxDQUFVLFNBQTVDOztBQUVBO0FBQ0EsV0FBSyxHQUFMLENBQVMsTUFBVCxHQUFrQixTQUFTLGFBQVQsQ0FBdUIsUUFBdkIsQ0FBbEI7QUFDQSxXQUFLLEdBQUwsQ0FBUyxNQUFULENBQWdCLFNBQWhCLENBQTBCLEdBQTFCLENBQWlDLEtBQUssSUFBTCxDQUFVLFNBQTNDO0FBQ0EsV0FBSyxHQUFMLENBQVMsTUFBVCxDQUFnQixXQUFoQixHQUE4QixLQUFLLEtBQW5DO0FBQ0EsV0FBSyxHQUFMLENBQVMsT0FBVCxDQUFpQixXQUFqQixDQUE2QixLQUFLLEdBQUwsQ0FBUyxNQUF0Qzs7QUFFQTtBQUNBLFdBQUssSUFBTCxDQUFVLEdBQVYsQ0FBYyxRQUFkLENBQXVCLFdB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OiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjbGFzcyBGdXR6QnV0dG9uIHtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgRnV0eiBidXR0b25cbiAgICovXG5cbiAgY29uc3RydWN0b3IoZnV0eiwgY29uZmlnKSB7XG4gICAgdGhpcy5mdXR6ID0gZnV0ejtcbiAgICB0aGlzLmlkID0gY29uZmlnLmlkO1xuICAgIHRoaXMudGl0bGUgPSBjb25maWcudGl0bGU7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNvbmZpZy5jYWxsYmFjaztcblxuICAgIHRoaXMuY3JlYXRlRE9NKCk7XG4gICAgdGhpcy5saXN0ZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgbmVjZXNzYXJ5IERPTSBlbGVtZW50c1xuICAgKi9cblxuICBjcmVhdGVET00oKSB7XG4gICAgdGhpcy5kb20gPSB7fTtcblxuICAgIC8vIGNvbnRyb2xcbiAgICB0aGlzLmRvbS5jb250cm9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kb20uY29udHJvbC5jbGFzc0xpc3QuYWRkKGAke3RoaXMuZnV0ei5uYW1lc3BhY2V9LWNvbnRyb2xgKTtcblxuICAgIC8vIGJ1dHRvblxuICAgIHRoaXMuZG9tLmJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHRoaXMuZG9tLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKGAke3RoaXMuZnV0ei5uYW1lc3BhY2V9LWNvbnRyb2wtYnV0dG9uYCk7XG4gICAgdGhpcy5kb20uYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcbiAgICB0aGlzLmRvbS5jb250cm9sLmFwcGVuZENoaWxkKHRoaXMuZG9tLmJ1dHRvbik7XG5cbiAgICAvLyBhZGQgY29udHJvbCB0byBwYW5lbFxuICAgIHRoaXMuZnV0ei5kb20uY29udHJvbHMuYXBwZW5kQ2hpbGQodGhpcy5kb20uY29udHJvbCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuXG4gIGxpc3RlbigpIHtcbiAgICB0aGlzLmRvbS5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5vbkJ1dHRvbkNsaWNrKGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPbiBidXR0b24gY2xpY2sgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGUgLSBFdmVudCBvYmplY3RcbiAgICovXG5cbiAgb25CdXR0b25DbGljayhlKSB7XG4gICAgdGhpcy5jYWxsYmFjaygpO1xuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGdXR6QnV0dG9uXG4iLCIvKipcbiAqIENyZWF0ZSBhIEZ1dHogY29udHJvbFxuICovXG5cbmNsYXNzIEZ1dHpDb250cm9sIHtcblxuICBjb25zdHJ1Y3RvcihmdXR6LCBjb25maWcpIHtcbiAgICB0aGlzLmZ1dHogPSBmdXR6O1xuICAgIHRoaXMudHlwZSA9IGNvbmZpZy50eXBlO1xuICAgIHRoaXMuaWQgPSBjb25maWcuaWQ7XG4gICAgdGhpcy50aXRsZSA9IGNvbmZpZy50aXRsZTtcbiAgICB0aGlzLmRlZmF1bHQgPSBjb25maWcuZGVmYXVsdDtcbiAgICB0aGlzLnJhbmRvbWl6YWJsZSA9IGNvbmZpZy5yYW5kb21pemFibGUgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy5sb2NrZWQgOiB0cnVlO1xuICAgIHRoaXMubXV0YWJsZSA9IGNvbmZpZy5tdXRhYmxlICE9PSB1bmRlZmluZWQgPyBjb25maWcubXV0YWJsZSA6IHRydWU7XG4gICAgdGhpcy5sb2NrZWQgPSBjb25maWcubG9ja2VkICE9PSB1bmRlZmluZWQgPyBjb25maWcubG9ja2VkIDogZmFsc2U7XG4gICAgdGhpcy52YWx1ZSA9IHRoaXMuZGVmYXVsdDtcbiAgICBcbiAgICB0aGlzLmNyZWF0ZURPTSgpO1xuICB9XG5cbiAgY3JlYXRlRE9NKCkge1xuICAgIHRoaXMuZG9tID0ge307XG4gICAgXG4gICAgLy8gY29udHJvbFxuICAgIHRoaXMuZG9tLmNvbnRyb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmRvbS5jb250cm9sLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5mdXR6Lm5hbWVzcGFjZX0tY29udHJvbGApO1xuXG4gICAgLy8gdGl0bGVcbiAgICB0aGlzLmRvbS50aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgdGhpcy5kb20udGl0bGUuY2xhc3NMaXN0LmFkZChgJHt0aGlzLmZ1dHoubmFtZXNwYWNlfS1jb250cm9sLXRpdGxlYCk7XG4gICAgdGhpcy5kb20udGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlO1xuICAgIHRoaXMuZG9tLmNvbnRyb2wuYXBwZW5kQ2hpbGQodGhpcy5kb20udGl0bGUpO1xuXG4gICAgLy8gdmFsdWVcbiAgICB0aGlzLmRvbS52YWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgdGhpcy5kb20udmFsdWUuY2xhc3NMaXN0LmFkZChgJHt0aGlzLmZ1dHoubmFtZXNwYWNlfS1jb250cm9sLXZhbHVlYCk7XG4gICAgdGhpcy5kb20uY29udHJvbC5hcHBlbmRDaGlsZCh0aGlzLmRvbS52YWx1ZSk7XG5cbiAgICAvLyBhZGQgY29udHJvbCB0byBwYW5lbFxuICAgIHRoaXMuZnV0ei5kb20uY29udHJvbHMuYXBwZW5kQ2hpbGQodGhpcy5kb20uY29udHJvbCk7XG4gIH1cblxuICBsb2NrKCkge1xuICAgIHRoaXMubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIHVubG9jaygpIHtcbiAgICB0aGlzLmxvY2tlZCA9IGZhbHNlO1xuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGdXR6Q29udHJvbDtcbiIsImNvbnN0IEZ1dHpDb250cm9sID0gcmVxdWlyZSgnLi9mdXR6LWNvbnRyb2wnKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBGdXR6IHJhbmdlIGNvbnRyb2xcbiAqXG4gKiBAZXh0ZW5kcyBGdXR6Q29udHJvbFxuICovXG5cbmNsYXNzIEZ1dHpSYW5nZUNvbnRyb2wgZXh0ZW5kcyBGdXR6Q29udHJvbCB7XG5cbiAgY29uc3RydWN0b3IoZnV0eiwgY29uZmlnKSB7XG4gICAgc3VwZXIoZnV0eiwgY29uZmlnKTtcbiAgICB0aGlzLm1pbiA9IGNvbmZpZy5taW47XG4gICAgdGhpcy5tYXggPSBjb25maWcubWF4O1xuICAgIHRoaXMuc3RlcCA9IGNvbmZpZy5zdGVwICE9PSB1bmRlZmluZWQgPyBNYXRoLmFicyhjb25maWcuc3RlcCkgOiAxO1xuICAgIHRoaXMucGxhY2VzID0gdGhpcy5zdGVwLnRvU3RyaW5nKCkuaW5kZXhPZignLicpID4gLTEgPyB0aGlzLnN0ZXAudG9TdHJpbmcoKS5zcGxpdCgnLicpWzFdLmxlbmd0aCA6IDA7XG4gICAgdGhpcy52YWx1ZVRhcmdldCA9IHRoaXMudmFsdWU7XG4gICAgICAgIFxuICAgIHRoaXMubW91c2VJc0Rvd24gPSBmYWxzZTtcbiAgICB0aGlzLnNldHRsZWQgPSBmYWxzZTtcbiAgICBcbiAgICB0aGlzLmxpc3RlbigpO1xuICAgIFxuICAgIHRoaXMuc2V0KHRoaXMudmFsdWUpO1xuICB9XG5cbiAgY3JlYXRlRE9NKCkge1xuICAgIHN1cGVyLmNyZWF0ZURPTSgpO1xuXG4gICAgLy8gcmFuZ2VcbiAgICB0aGlzLmRvbS5yYW5nZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZG9tLnJhbmdlLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5mdXR6Lm5hbWVzcGFjZX0tY29udHJvbC1yYW5nZWApO1xuXG4gICAgLy8gcmFuZ2UgaW5uZXJcbiAgICB0aGlzLmRvbS5yYW5nZUlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kb20ucmFuZ2VJbm5lci5jbGFzc0xpc3QuYWRkKGAke3RoaXMuZnV0ei5uYW1lc3BhY2V9LWNvbnRyb2wtcmFuZ2UtaW5uZXJgKTtcbiAgICB0aGlzLmRvbS5yYW5nZS5hcHBlbmRDaGlsZCh0aGlzLmRvbS5yYW5nZUlubmVyKTtcbiAgICBcbiAgICB0aGlzLmRvbS5jb250cm9sLmFwcGVuZENoaWxkKHRoaXMuZG9tLnJhbmdlKTtcbiAgfVxuXG4gIGxpc3RlbigpIHtcbiAgICB0aGlzLmRvbS52YWx1ZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4gdGhpcy5vblZhbHVlQ2hhbmdlKGUpKTtcbiAgICB0aGlzLmRvbS5yYW5nZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4gdGhpcy5vblZhbHVlTW91c2Vkb3duKGUpKTtcbiAgfVxuXG4gIG9uVmFsdWVDaGFuZ2UoZSkge1xuICAgIHRoaXMuc2V0KHRoaXMuZG9tLnZhbHVlLnZhbHVlKTtcbiAgICB0aGlzLnZhbHVlVGFyZ2V0ID0gdGhpcy52YWx1ZTtcbiAgfVxuXG4gIG9uVmFsdWVNb3VzZWRvd24oZSkge1xuICAgIHRoaXMuZnV0ei5tb3VzZS5kb3duID0gdHJ1ZTtcbiAgICB0aGlzLmZ1dHoubW91c2UuYW5jaG9yLnggPSBlLmNsaWVudFg7XG4gICAgdGhpcy5mdXR6Lm1vdXNlLmFuY2hvci55ID0gZS5jbGllbnRZO1xuICAgIHRoaXMubW91c2VJc0Rvd24gPSB0cnVlO1xuICAgIHRoaXMuc2V0RHJhZ1ZhbHVlKCk7XG4gIH1cblxuICBvbldpbmRvd01vdXNldXAoZSkge1xuICAgIHRoaXMubW91c2VJc0Rvd24gPSBmYWxzZTtcbiAgfVxuXG4gIG9uV2luZG93TW91c2Vtb3ZlKGUpIHtcbiAgICBpZih0aGlzLm1vdXNlSXNEb3duKSB7XG4gICAgICB0aGlzLnNldERyYWdWYWx1ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldERyYWdWYWx1ZSgpIHtcbiAgICBsZXQgbGVmdCA9IHRoaXMuZG9tLnJhbmdlLm9mZnNldExlZnQ7XG4gICAgbGV0IHdpZHRoID0gdGhpcy5kb20ucmFuZ2Uub2Zmc2V0V2lkdGg7XG4gICAgbGV0IHZhbCA9IHRoaXMuZnV0ei5tYXAodGhpcy5mdXR6Lm1vdXNlLngsIGxlZnQsIGxlZnQgKyB3aWR0aCwgdGhpcy5taW4sIHRoaXMubWF4KTtcbiAgICB0aGlzLnNldCh2YWwpO1xuICAgIHRoaXMudmFsdWVUYXJnZXQgPSB0aGlzLnZhbHVlO1xuICB9XG5cbiAgZWFzZVNldCgpIHtcbiAgICBpZihNYXRoLmFicyh0aGlzLnZhbHVlIC0gdGhpcy52YWx1ZVRhcmdldCkgPiB0aGlzLnN0ZXAgLyAyKSB7XG4gICAgICB0aGlzLnZhbHVlICs9ICh0aGlzLnZhbHVlVGFyZ2V0IC0gdGhpcy52YWx1ZSkgKiAwLjI7XG4gICAgICB0aGlzLnNldCh0aGlzLnZhbHVlLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXR0bGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlVGFyZ2V0O1xuICAgICAgdGhpcy5zZXQodGhpcy52YWx1ZSk7IFxuICAgIH1cbiAgfVxuXG4gIHNldCh2YWwsIGJ5cGFzc1JvdW5kaW5nKSB7XG4gICAgLy8gc2FuaXRpemUgdmFsdWVcbiAgICB2YWwgPSBwYXJzZUZsb2F0KHZhbCk7XG4gICAgdmFsID0gaXNOYU4odmFsKSA/IHRoaXMuZGVmYXVsdCA6IHZhbDtcbiAgICB2YWwgPSB0aGlzLmZ1dHouY2xhbXAodmFsLCB0aGlzLm1pbiwgdGhpcy5tYXgpO1xuICAgIHZhbCA9IGJ5cGFzc1JvdW5kaW5nID8gdmFsIDogdGhpcy5mdXR6LnJvdW5kVG9OZWFyZXN0SW50ZXJ2YWwodmFsLCB0aGlzLnN0ZXApO1xuICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gICAgXG4gICAgLy8gc2V0IGlucHV0IHZhbHVlXG4gICAgdGhpcy5kb20udmFsdWUudmFsdWUgPSB0aGlzLnZhbHVlLnRvRml4ZWQodGhpcy5wbGFjZXMpO1xuICAgIFxuICAgIC8vIHNldCByYW5nZSB2YWx1ZVxuICAgIHRoaXMuZG9tLnJhbmdlSW5uZXIuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlWCgke3RoaXMuZnV0ei5tYXAodGhpcy52YWx1ZSwgdGhpcy5taW4sIHRoaXMubWF4LCAwLCAxKX0pYDtcbiAgICBcbiAgICAvLyBzZXQgdGhlIHRpdGxlIGF0dHJpYnV0ZSBmb3IgdGhlIGNvbnRyb2xcbiAgICB0aGlzLmRvbS5jb250cm9sLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBgJHt0aGlzLnRpdGxlfTogJHt0aGlzLnZhbHVlLnRvRml4ZWQodGhpcy5wbGFjZXMpfWApO1xuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGdXR6UmFuZ2VDb250cm9sO1xuIiwiY29uc3QgRnV0ekJ1dHRvbiA9IHJlcXVpcmUoJy4vZnV0ei1idXR0b24nKTtcbmNvbnN0IEZ1dHpSYW5nZUNvbnRyb2wgPSByZXF1aXJlKCcuL2Z1dHotcmFuZ2UtY29udHJvbCcpO1xuXG5jbGFzcyBGdXR6IHtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgRnV0eiBjb250cm9sIHBhbmVsXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSBDb25maWd1cmF0aW9uIG9iamVjdFxuICAgKiBAcGFyYW0ge29iamVjdHxzdHJpbmd9IFtjb25maWcuY29udGFpbmVyPWRvY3VtZW50LmJvZHldIC0gRE9NIGVsZW1lbnQgb3IgQ1NTIHNlbGVjdG9yXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLnRpdGxlPVwiQ29udHJvbCBQYW5lbFwiXSAtIFRpdGxlIG9mIHRoZSBwYW5lbFxuICAgKlxuICAgKiBAcmVxdWlyZXMge0BsaW5rY29kZSBGdXR6QnV0dG9ufVxuICAgKiBAcmVxdWlyZXMge0BsaW5rY29kZSBGdXR6UmFuZ2VDb250cm9sfVxuICAgKi9cblxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLm5hbWVzcGFjZSA9ICdmdXR6JztcbiAgICB0aGlzLmNvbnRyb2xzID0ge307XG4gICAgdGhpcy5idXR0b25zID0ge307XG5cbiAgICB0aGlzLm1vdXNlID0ge1xuICAgICAgZG93bjogZmFsc2UsXG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIGFuY2hvcjoge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5uZWVkc1VwZGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMucmFmID0gbnVsbDtcblxuICAgIHRoaXMuY29udGFpbmVyID0gY29uZmlnLmNvbnRhaW5lciAhPT0gdW5kZWZpbmVkID8gY29uZmlnLmNvbnRhaW5lciA6IGRvY3VtZW50LmJvZHk7XG4gICAgdGhpcy50aXRsZSA9IGNvbmZpZy50aXRsZSAhPT0gdW5kZWZpbmVkID8gY29uZmlnLnRpdGxlIDogJ0Z1dHonO1xuICAgIFxuICAgIHRoaXMuY3JlYXRlRE9NKCk7XG4gICAgdGhpcy5saXN0ZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgbmVjZXNzYXJ5IERPTSBlbGVtZW50c1xuICAgKi9cblxuICBjcmVhdGVET00oKSB7XG4gICAgdGhpcy5kb20gPSB7fTtcbiAgICBcbiAgICAvLyBjb250YWluZXJcbiAgICB0aGlzLmRvbS5jb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICBcbiAgICAvLyBwYW5lbFxuICAgIHRoaXMuZG9tLnBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kb20ucGFuZWwuY2xhc3NMaXN0LmFkZChgJHt0aGlzLm5hbWVzcGFjZX0tcGFuZWxgKTtcbiAgICBcbiAgICAvLyB0aXRsZVxuICAgIHRoaXMuZG9tLnRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDEnKTtcbiAgICB0aGlzLmRvbS50aXRsZS5jbGFzc0xpc3QuYWRkKGAke3RoaXMubmFtZXNwYWNlfS10aXRsZWApO1xuICAgIHRoaXMuZG9tLnRpdGxlLnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcbiAgICB0aGlzLmRvbS5wYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmRvbS50aXRsZSk7XG4gICAgXG4gICAgLy8gY29udHJvbHNcbiAgICB0aGlzLmRvbS5jb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZG9tLmNvbnRyb2xzLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5uYW1lc3BhY2V9LWNvbnRyb2xzYCk7XG4gICAgdGhpcy5kb20ucGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5kb20uY29udHJvbHMpO1xuICAgIFxuICAgIC8vIGFkZCBwYW5lbCB0byBjb250YWluZXJcbiAgICB0aGlzLmRvbS5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5kb20ucGFuZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGV2ZW50IGxpc3RlbmVyc1xuICAgKi9cblxuICBsaXN0ZW4oKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZSkgPT4gdGhpcy5vbldpbmRvd01vdXNldXAoZSkpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZSkgPT4gdGhpcy5vbldpbmRvd01vdXNlbW92ZShlKSk7XG4gIH1cblxuICAvKipcbiAgICogT24gd2luZG93IG1vdXNlIHVwIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBlIC0gRXZlbnQgb2JqZWN0XG4gICAqL1xuXG4gIG9uV2luZG93TW91c2V1cChlKSB7XG4gICAgdGhpcy5tb3VzZS5kb3duID0gZmFsc2U7XG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5jb250cm9scykge1xuICAgICAgbGV0IGNvbnRyb2wgPSB0aGlzLmNvbnRyb2xzW2tleV07XG4gICAgICBjb250cm9sLm9uV2luZG93TW91c2V1cChlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT24gd2luZG93IG1vdXNlIG1vdmUgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGUgLSBFdmVudCBvYmplY3RcbiAgICovXG5cbiAgb25XaW5kb3dNb3VzZW1vdmUoZSkge1xuICAgIHRoaXMubW91c2UueCA9IGUuY2xpZW50WDtcbiAgICB0aGlzLm1vdXNlLnkgPSBlLmNsaWVudFk7XG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5jb250cm9scykge1xuICAgICAgbGV0IGNvbnRyb2wgPSB0aGlzLmNvbnRyb2xzW2tleV07XG4gICAgICBjb250cm9sLm9uV2luZG93TW91c2Vtb3ZlKGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYmFzZWQgb24gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKClcbiAgICovXG5cbiAgdXBkYXRlKCkge1xuICAgIHRoaXMubmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLmNvbnRyb2xzKSB7XG4gICAgICBpZih0aGlzLmNvbnRyb2xzW2tleV0udHlwZSA9PT0gJ3JhbmdlJykge1xuICAgICAgICB0aGlzLmNvbnRyb2xzW2tleV0uZWFzZVNldCgpO1xuICAgICAgICBpZighdGhpcy5jb250cm9sc1trZXldLnNldHRsZWQpIHtcbiAgICAgICAgICB0aGlzLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmKHRoaXMubmVlZHNVcGRhdGUpIHtcbiAgICAgIHRoaXMucmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMudXBkYXRlKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBidXR0b25cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcuaWQgLSBJRCBzbHVnXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcudGl0bGUgLSBUaXRsZSB0ZXh0XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbY29uZmlnLmNhbGxiYWNrPSgpID0+IHt9XSAtIENhbGxiYWNrIGZ1bmN0aW9uIGZvciBidXR0b24gcHJlc3NcbiAgICovXG5cbiAgYWRkQnV0dG9uKGNvbmZpZykge1xuICAgIGZvcihsZXQga2V5IGluIHRoaXMuYnV0dG9ucykge1xuICAgICAgIGlmKGNvbmZpZy5pZCA9PT0gdGhpcy5idXR0b25zW2tleV0uaWQpIHtcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZ1dHo6IEEgYnV0dG9uIHdpdGggYW4gaWQgb2YgJyR7Y29uZmlnLmlkfScgaXMgYWxyZWFkeSBpbiB1c2UuYCk7IFxuICAgICAgICAgcmV0dXJuO1xuICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5idXR0b25zW2NvbmZpZy5pZF0gPSBuZXcgRnV0ekJ1dHRvbih0aGlzLCBjb25maWcpO1xuICB9XG5cbiAgYWRkQ29udHJvbChjb25maWcpIHtcbiAgICBsZXQgY29udHJvbCA9IG51bGw7XG5cbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLmNvbnRyb2xzKSB7XG4gICAgICAgaWYoY29uZmlnLmlkID09PSB0aGlzLmNvbnRyb2xzW2tleV0uaWQpIHtcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZ1dHo6IEEgY29udHJvbCB3aXRoIGFuIGlkIG9mICcke2NvbmZpZy5pZH0nIGlzIGFscmVhZHkgaW4gdXNlLmApOyBcbiAgICAgICAgIHJldHVybjtcbiAgICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoKGNvbmZpZy50eXBlKSB7XG4gICAgICBjYXNlICdyYW5nZSc6XG4gICAgICAgIGNvbnRyb2wgPSBuZXcgRnV0elJhbmdlQ29udHJvbCh0aGlzLCBjb25maWcpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZihjb250cm9sKSB7XG4gICAgICB0aGlzLmNvbnRyb2xzW2NvbnRyb2wuaWRdID0gY29udHJvbDsgXG4gICAgfVxuICB9XG5cbiAgZ2V0KGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbHNbaWRdLnZhbHVlO1xuICB9XG5cbiAgcmFuZG9taXplKCkge1xuICAgIGZvcihsZXQga2V5IGluIHRoaXMuY29udHJvbHMpIHtcbiAgICAgIGxldCBjb250cm9sID0gdGhpcy5jb250cm9sc1trZXldO1xuICAgICAgY29udHJvbC5zZXR0bGVkID0gZmFsc2U7XG4gICAgICBjb250cm9sLnZhbHVlVGFyZ2V0ID0gdGhpcy5yYW5kKGNvbnRyb2wubWluLCBjb250cm9sLm1heCk7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJhZik7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIG11dGF0ZSgpIHtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLmNvbnRyb2xzKSB7XG4gICAgICBsZXQgY29udHJvbCA9IHRoaXMuY29udHJvbHNba2V5XTtcbiAgICAgIGxldCBzaXplID0gKGNvbnRyb2wubWF4IC0gY29udHJvbC5taW4pIC8gMTU7XG4gICAgICBjb250cm9sLnNldHRsZWQgPSBmYWxzZTtcbiAgICAgIGlmKGNvbnRyb2wudmFsdWUgPD0gY29udHJvbC5taW4pIHtcbiAgICAgICAgY29udHJvbC52YWx1ZVRhcmdldCA9IHRoaXMucmFuZChjb250cm9sLnN0ZXAsIGNvbnRyb2wubWluICsgc2l6ZSk7XG4gICAgICB9IGVsc2UgaWYoY29udHJvbC52YWx1ZSA+PSBjb250cm9sLm1heCkge1xuICAgICAgICBjb250cm9sLnZhbHVlVGFyZ2V0ID0gdGhpcy5yYW5kKGNvbnRyb2wubWF4IC0gc2l6ZSwgY29udHJvbC5tYXggLSBjb250cm9sLnN0ZXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udHJvbC52YWx1ZVRhcmdldCA9IGNvbnRyb2wudmFsdWUgKyB0aGlzLnJhbmQoLXNpemUsIHNpemUpO1xuICAgICAgfVxuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yYWYpO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICByYW5kKG1pbiwgbWF4LCBlYXNlKSB7XG4gICAgaWYobWF4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG1heCA9IG1pbjtcbiAgICAgIG1pbiA9IDA7XG4gICAgfVxuICAgIGxldCByYW5kb20gPSBNYXRoLnJhbmRvbSgpO1xuICAgIHJldHVybiByYW5kb20gKiAobWF4IC0gbWluKSArIG1pbjtcbiAgfVxuXG4gIGNsYW1wKHZhbCwgbWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odmFsLCBtYXgpLCBtaW4pO1xuICB9XG5cbiAgbWFwKHZhbCwgaW5NaW4sIGluTWF4LCBvdXRNaW4sIG91dE1heCkge1xuICAgIHJldHVybiAoKG91dE1heCAtIG91dE1pbikgKiAoKHZhbCAtIGluTWluKSAvIChpbk1heCAtIGluTWluKSkpICsgb3V0TWluO1xuICB9XG5cbiAgcm91bmRUb05lYXJlc3RJbnRlcnZhbCh2YWx1ZSwgaW50ZXJ2YWwpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIGludGVydmFsKSAqIGludGVydmFsO1xuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGdXR6O1xuIl19"}