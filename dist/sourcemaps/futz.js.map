{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/button.js","src/js/controls/control.js","src/js/controls/range.js","src/js/index.js","src/js/util/calc.js"],"names":[],"mappings":"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","file":"../futz.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Create a button\n */\n\nclass Button {\n\n  constructor(futz, config) {\n    this.futz = futz;\n    this.id = config.id;\n    this.title = config.title;\n    this.callback = config.callback !== undefined ? config.callback : () => {};\n\n    this.createDOM();\n    this.listen();\n  }\n\n  /**\n   * Create necessary DOM elements\n   */\n\n  createDOM() {\n    this.dom = {};\n\n    // control\n    this.dom.control = document.createElement('div');\n    this.dom.control.classList.add(`${this.futz.namespace}-control`);\n\n    // button\n    this.dom.button = document.createElement('button');\n    this.dom.button.classList.add(`${this.futz.namespace}-control-button`);\n    this.dom.button.textContent = this.title;\n    this.dom.control.appendChild(this.dom.button);\n\n    // add to control to panel\n    this.futz.dom.controls.appendChild(this.dom.control);\n  }\n\n  /**\n   * Setup event listeners\n   */\n\n  listen() {\n    this.dom.button.addEventListener('click', (e) => this.onButtonClick(e));\n  }\n\n  /**\n   * On button click event\n   *\n   * @param {object} e - Event object\n   */\n\n  onButtonClick(e) {\n    this.callback();\n  }\n\n}\n\nmodule.exports = Button\n","/**\n * Create a control\n */\n\nclass Control {\n\n  constructor(futz, config) {\n    this.futz = futz;\n    this.type = config.type;\n    this.id = config.id;\n    this.title = config.title;\n    this.default = config.default;\n    this.randomizable = config.randomizable !== undefined ? config.randomizable : true;\n    this.mutable = config.mutable !== undefined ? config.mutable : true;\n    this.locked = config.locked !== undefined ? config.locked : false;\n    this.value = this.default;\n\n    this.createDOM();\n  }\n\n  createDOM() {\n    this.dom = {};\n\n    // control\n    this.dom.control = document.createElement('div');\n    this.dom.control.classList.add(`${this.futz.namespace}-control`);\n\n    // title\n    this.dom.title = document.createElement('h3');\n    this.dom.title.classList.add(`${this.futz.namespace}-control-title`);\n    this.dom.title.textContent = this.title;\n    this.dom.control.appendChild(this.dom.title);\n\n    // value\n    this.dom.value = document.createElement('input');\n    this.dom.value.classList.add(`${this.futz.namespace}-control-value`);\n    this.dom.control.appendChild(this.dom.value);\n\n    // add control to panel\n    this.futz.dom.controls.appendChild(this.dom.control);\n  }\n\n  lock() {\n    this.locked = true;\n  }\n\n  unlock() {\n    this.locked = false;\n  }\n\n}\n\nmodule.exports = Control;\n","const Control = require('./control');\nconst Calc = require('../util/calc');\n\n/**\n * Create a range control\n *\n * @param {object} futz - Reference to parent Futz instance\n * @param {object} config - Configuration object\n * @param {string} config.id - Unique id/slug\n * @param {string} config.title - UI display title\n * @param {number} config.min - Minimum value\n * @param {number} config.max - Maximum value\n * @param {number} config.step - Step size\n * @param {number} config.default - Starting value\n * @param {boolean} config.randomizable - Can be randomized individually and by randomizing all\n * @param {boolean} config.mutable - Can be mutated individually and by mutating all\n * @param {boolean} config.locked - Temporarily toggle whether the control is affected by randomization and mutation\n *\n * @extends Control\n *\n * @requires {@link Control}\n * @requires {@link Calc}\n */\n\nclass Range extends Control {\n\n  constructor(futz, config) {\n    super(futz, config);\n    this.type = 'range';\n\n    this.min = config.min;\n    this.max = config.max;\n    this.step = config.step !== undefined ? Math.abs(config.step) : 1;\n    this.places = this.step.toString().indexOf('.') > -1 ? this.step.toString().split('.')[1].length : 0;\n    this.valueTarget = this.value;\n\n    this.mouseIsDown = false;\n    this.settled = false;\n\n    this.listen();\n\n    this.set(this.value);\n  }\n\n  createDOM() {\n    super.createDOM();\n\n    // range\n    this.dom.range = document.createElement('div');\n    this.dom.range.classList.add(`${this.futz.namespace}-control-range`);\n\n    // range inner\n    this.dom.rangeInner = document.createElement('div');\n    this.dom.rangeInner.classList.add(`${this.futz.namespace}-control-range-inner`);\n    this.dom.range.appendChild(this.dom.rangeInner);\n    \n    this.dom.control.appendChild(this.dom.range);\n  }\n\n  listen() {\n    this.dom.value.addEventListener('change', (e) => this.onValueChange(e));\n    this.dom.range.addEventListener('mousedown', (e) => this.onValueMousedown(e));\n  }\n\n  onValueChange(e) {\n    this.set(this.dom.value.value);\n    this.valueTarget = this.value;\n  }\n\n  onValueMousedown(e) {\n    this.futz.mouse.down = true;\n    this.futz.mouse.anchor.x = e.clientX;\n    this.futz.mouse.anchor.y = e.clientY;\n    this.mouseIsDown = true;\n    this.setDragValue();\n  }\n\n  onWindowMouseup(e) {\n    this.mouseIsDown = false;\n  }\n\n  onWindowMousemove(e) {\n    if(this.mouseIsDown) {\n      this.setDragValue();\n    }\n  }\n\n  randomize() {\n    this.settled = false;\n    this.valueTarget = Calc.rand(this.min, this.max);\n  }\n\n  setDragValue() {\n    let left = this.dom.range.offsetLeft;\n    let width = this.dom.range.offsetWidth;\n    let val = Calc.map(this.futz.mouse.x, left, left + width, this.min, this.max);\n    this.set(val);\n    this.valueTarget = this.value;\n  }\n\n  easeSet() {\n    if(Math.abs(this.value - this.valueTarget) > this.step / 2) {\n      this.value += (this.valueTarget - this.value) * 0.2;\n      this.set(this.value, true);\n    } else {\n      this.settled = true;\n      this.value = this.valueTarget;\n      this.set(this.value); \n    }\n  }\n\n  set(val, bypassRounding) {\n    // sanitize value\n    val = parseFloat(val);\n    val = isNaN(val) ? this.default : val;\n    val = Calc.clamp(val, this.min, this.max);\n    val = bypassRounding ? val : Calc.roundToNearestInterval(val, this.step);\n    this.value = val;\n    \n    // set input value\n    this.dom.value.value = this.value.toFixed(this.places);\n    \n    // set range value\n    this.dom.rangeInner.style.transform = `scaleX(${Calc.map(this.value, this.min, this.max, 0, 1)})`;\n    \n    // set the title attribute for the control\n    this.dom.control.setAttribute('title', `${this.title}: ${this.value.toFixed(this.places)}`);\n  }\n\n}\n\nmodule.exports = Range;\n","const Button = require('./button');\nconst Range = require('./controls/range');\nconst Calc = require('./util/calc');\n\nclass Futz {\n\n  /**\n   * Create a Futz control panel\n   *\n   * @param {object} config - Configuration object\n   * @param {object|string} [config.container=document.body] - DOM element or CSS selector\n   * @param {string} [config.title=\"Control Panel\"] - Title of the panel\n   *\n   * @requires {@link Button}\n   * @requires {@link Range}\n   * @requires {@link Calc}\n   */\n\n  constructor(config) {\n    this.namespace = 'futz';\n    this.controls = {};\n    this.buttons = {};\n\n    this.mouse = {\n      down: false,\n      x: 0,\n      y: 0,\n      anchor: {\n        x: 0,\n        y: 0\n      }\n    }\n\n    this.needsUpdate = false;\n    this.raf = null;\n\n    this.container = config.container !== undefined ? config.container : document.body;\n    this.title = config.title !== undefined ? config.title : 'Futz';\n    \n    this.createDOM();\n    this.listen();\n  }\n\n  /**\n   * Create necessary DOM elements\n   */\n\n  createDOM() {\n    this.dom = {};\n\n    // container\n    this.dom.container = this.container;\n\n    // panel\n    this.dom.panel = document.createElement('div');\n    this.dom.panel.classList.add(`${this.namespace}-panel`);\n\n    // title\n    this.dom.title = document.createElement('h1');\n    this.dom.title.classList.add(`${this.namespace}-title`);\n    this.dom.title.textContent = this.title;\n    this.dom.panel.appendChild(this.dom.title);\n\n    // controls\n    this.dom.controls = document.createElement('div');\n    this.dom.controls.classList.add(`${this.namespace}-controls`);\n    this.dom.panel.appendChild(this.dom.controls);\n\n    // add panel to container\n    this.dom.container.appendChild(this.dom.panel);\n  }\n\n  /**\n   * Setup event listeners\n   */\n\n  listen() {\n    window.addEventListener('mouseup', (e) => this.onWindowMouseup(e));\n    window.addEventListener('mousemove', (e) => this.onWindowMousemove(e));\n  }\n\n  /**\n   * On window mouse up event\n   *\n   * @param {object} e - Event object\n   */\n\n  onWindowMouseup(e) {\n    this.mouse.down = false;\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      control.onWindowMouseup(e);\n    }\n  }\n\n  /**\n   * On window mouse move event\n   *\n   * @param {object} e - Event object\n   */\n\n  onWindowMousemove(e) {\n    this.mouse.x = e.clientX;\n    this.mouse.y = e.clientY;\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      control.onWindowMousemove(e);\n    }\n  }\n\n  /**\n   * Update based on requestAnimationFrame()\n   */\n\n  update() {\n    this.needsUpdate = false;\n    for(let key in this.controls) {\n      if(this.controls[key].type === 'range') {\n        this.controls[key].easeSet();\n        if(!this.controls[key].settled) {\n          this.needsUpdate = true;\n        }\n      }\n    }\n\n    if(this.needsUpdate) {\n      this.raf = requestAnimationFrame(() => this.update());\n    }\n  }\n\n  /**\n   * Add a button\n   *\n   * @param {object} config - Configuration object\n   * @param {object} config.id - ID slug\n   * @param {object} config.title - Title text\n   * @param {object} [config.callback=() => {}] - Callback function for button press\n   */\n\n  addButton(config) {\n    this.buttons[config.id] = new Button(this, config);\n  }\n\n  /**\n   * Add a range control via {@linkcode Range}\n   *\n   * @param {object} config - Configuration object\n   * @param {string} config.id - Unique id/slug\n   * @param {string} config.title - UI display title\n   * @param {number} config.min - Minimum value\n   * @param {number} config.max - Maximum value\n   * @param {number} config.step - Step size\n   * @param {number} config.default - Starting value\n   * @param {boolean} config.randomizable - Can be randomized individually and by randomizing all\n   * @param {boolean} config.mutable - Can be mutated individually and by mutating all\n   * @param {boolean} config.locked - Temporarily toggle whether the control is affected by randomization and mutation\n   */\n\n  addRange(config) {\n    let control = new Range(this, config);\n    this.controls[control.id] = control;\n  }\n\n  get(id) {\n    return this.controls[id].value;\n  }\n\n  randomize() {\n    for(let key in this.controls) {\n      this.controls[key].randomize();\n    }\n    cancelAnimationFrame(this.raf);\n    this.update();\n  }\n\n  mutate() {\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      let size = (control.max - control.min) / 15;\n      control.settled = false;\n      if(control.value <= control.min) {\n        control.valueTarget = Calc.rand(control.step, control.min + size);\n      } else if(control.value >= control.max) {\n        control.valueTarget = Calc.rand(control.max - size, control.max - control.step);\n      } else {\n        control.valueTarget = control.value + Calc.rand(-size, size);\n      }\n      cancelAnimationFrame(this.raf);\n      this.update();\n    }\n  }\n\n}\n\nmodule.exports = Futz;\n","/**\n * Calculation functions and helpers\n */\n\nclass Calc {\n\n  /**\n  * Get a random float within a range. If only one argument is passed, it is used as the max and the min becomes zero.\n  *\n  * @param {number} min - Minimum range value\n  * @param {number} max - Maximum range value\n  *\n  * @example\n  * // two arguments\n  * Calc.rand(2, 18);\n  * // -> random float between 2 and 18\n  *\n  * // single argument\n  * Calc.rand(42.5);\n  * // -> random float between 0 and 42.5\n  *\n  * @returns {number} Random float within the range\n  */\n  static rand(min, max) {\n    if(max === undefined) {\n      max = min;\n      min = 0;\n    }\n    return Math.random() * (max - min) + min;\n  }\n\n  /**\n  * Clamp a value to a range\n  *\n  * @param {number} val - Input value\n  * @param {number} min - Minimum range value\n  * @param {number} max - Maximum range value\n  *\n  * @example\n  * Calc.clamp(3, 10, 150);\n  * // -> 10\n  *\n  * Calc.clamp(400, 10, 150);\n  * // -> 150\n  *\n  * Calc.clamp(75, 10, 100);\n  * // -> 75\n  *\n  * @returns {number} Clamped value within range\n  */\n\n  static clamp(val, min, max) {\n    return Math.max(Math.min(val, max), min);\n  }\n\n  static map(val, inMin, inMax, outMin, outMax) {\n    return ((outMax - outMin) * ((val - inMin) / (inMax - inMin))) + outMin;\n  }\n\n  static roundToNearestInterval(value, interval) {\n    return Math.round(value / interval) * interval;\n  }\n\n}\n\nmodule.exports = Calc;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYnV0dG9uLmpzIiwic3JjL2pzL2NvbnRyb2xzL2NvbnRyb2wuanMiLCJzcmMvanMvY29udHJvbHMvcmFuZ2UuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvdXRpbC9jYWxjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDQUE7Ozs7SUFJTSxNO0FBRUosa0JBQVksSUFBWixFQUFrQixNQUFsQixFQUEwQjtBQUFBOztBQUN4QixTQUFLLElBQUwsR0FBWSxJQUFaO0FBQ0EsU0FBSyxFQUFMLEdBQVUsT0FBTyxFQUFqQjtBQUNBLFNBQUssS0FBTCxHQUFhLE9BQU8sS0FBcEI7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsT0FBTyxRQUFQLEtBQW9CLFNBQXBCLEdBQWdDLE9BQU8sUUFBdkMsR0FBa0QsWUFBTSxDQUFFLENBQTFFOztBQUVBLFNBQUssU0FBTDtBQUNBLFNBQUssTUFBTDtBQUNEOztBQUVEOzs7Ozs7Z0NBSVk7QUFDVixXQUFLLEdBQUwsR0FBVyxFQUFYOztBQUVBO0FBQ0EsV0FBSyxHQUFMLENBQVMsT0FBVCxHQUFtQixTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBbkI7QUFDQSxXQUFLLEdBQUwsQ0FBUyxPQUFULENBQWlCLFNBQWpCLENBQTJCLEdBQTNCLENBQWtDLEtBQUssSUFBTCxDQUFVLFNBQTVDOztBQUVBO0FBQ0EsV0FBSyxHQUFMLENBQVMsTUFBVCxHQUFrQixTQUFTLGFBQVQsQ0FBdUIsUUFBdkIsQ0FBbEI7QUFDQSxXQUFLLEdBQUwsQ0FBUyxNQUFULENBQWdCLFNBQWhCLENBQTBCLEdBQTFCLENBQWlDLEtBQUssSUFBTCxDQUFVLFNBQTNDO0FBQ0EsV0FBSyxHQUFMLENBQVMsTUFBVCxDQUFnQixXQUFoQixHQUE4QixLQUFLLEtBQW5DO0FBQ0EsV0FBSyxHQUFMLENBQVMsT0FBVCxDQUFpQixXQUFqQixDQUE2QixLQUFL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UUFBUSxLQUFSLEdBQWdCLEtBQUssSUFBTCxDQUFVLENBQUMsSUFBWCxFQUFpQixJQUFqQixDQUF0QztBQUNEO0FBQ0QsNkJBQXFCLEtBQUssR0FBMUI7QUFDQSxhQUFLLE1BQUw7QUFDRDtBQUNGOzs7Ozs7QUFJSCxPQUFPLE9BQVAsR0FBaUIsSUFBakI7Ozs7Ozs7OztBQ2xNQTs7OztJQUlNLEk7Ozs7Ozs7OztBQUVKOzs7Ozs7Ozs7Ozs7Ozs7Ozt5QkFpQlksRyxFQUFLLEcsRUFBSztBQUNwQixVQUFHLFFBQVEsU0FBWCxFQUFzQjtBQUNwQixjQUFNLEdBQU47QUFDQSxjQUFNLENBQU47QUFDRDtBQUNELGFBQU8sS0FBSyxNQUFMLE1BQWlCLE1BQU0sR0FBdkIsSUFBOEIsR0FBckM7QUFDRDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFvQmEsRyxFQUFLLEcsRUFBSyxHLEVBQUs7QUFDMUIsYUFBTyxLQUFLLEdBQUwsQ0FBUyxLQUFLLEdBQUwsQ0FBUyxHQUFULEVBQWMsR0FBZCxDQUFULEVBQTZCLEdBQTdCLENBQVA7QUFDRDs7O3dCQUVVLEcsRUFBSyxLLEVBQU8sSyxFQUFPLE0sRUFBUSxNLEVBQVE7QUFDNUMsYUFBUSxDQUFDLFNBQVMsTUFBVixLQUFxQixDQUFDLE1BQU0sS0FBUCxLQUFpQixRQUFRLEtBQXpCLENBQXJCLENBQUQsR0FBMEQsTUFBakU7QUFDRDs7OzJDQUU2QixLLEVBQU8sUSxFQUFVO0FBQzdDLGFBQU8sS0FBSyxLQUFMLENBQVcsUUFBUSxRQUFuQixJQUErQixRQUF0QztBQUNEOzs7Ozs7QUFJSCxPQUFPLE9BQVAsR0FBaUIsSUFBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBDcmVhdGUgYSBidXR0b25cbiAqL1xuXG5jbGFzcyBCdXR0b24ge1xuXG4gIGNvbnN0cnVjdG9yKGZ1dHosIGNvbmZpZykge1xuICAgIHRoaXMuZnV0eiA9IGZ1dHo7XG4gICAgdGhpcy5pZCA9IGNvbmZpZy5pZDtcbiAgICB0aGlzLnRpdGxlID0gY29uZmlnLnRpdGxlO1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjb25maWcuY2FsbGJhY2sgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy5jYWxsYmFjayA6ICgpID0+IHt9O1xuXG4gICAgdGhpcy5jcmVhdGVET00oKTtcbiAgICB0aGlzLmxpc3RlbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBuZWNlc3NhcnkgRE9NIGVsZW1lbnRzXG4gICAqL1xuXG4gIGNyZWF0ZURPTSgpIHtcbiAgICB0aGlzLmRvbSA9IHt9O1xuXG4gICAgLy8gY29udHJvbFxuICAgIHRoaXMuZG9tLmNvbnRyb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmRvbS5jb250cm9sLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5mdXR6Lm5hbWVzcGFjZX0tY29udHJvbGApO1xuXG4gICAgLy8gYnV0dG9uXG4gICAgdGhpcy5kb20uYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgdGhpcy5kb20uYnV0dG9uLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5mdXR6Lm5hbWVzcGFjZX0tY29udHJvbC1idXR0b25gKTtcbiAgICB0aGlzLmRvbS5idXR0b24udGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlO1xuICAgIHRoaXMuZG9tLmNvbnRyb2wuYXBwZW5kQ2hpbGQodGhpcy5kb20uYnV0dG9uKTtcblxuICAgIC8vIGFkZCB0byBjb250cm9sIHRvIHBhbmVsXG4gICAgdGhpcy5mdXR6LmRvbS5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmRvbS5jb250cm9sKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnNcbiAgICovXG5cbiAgbGlzdGVuKCkge1xuICAgIHRoaXMuZG9tLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLm9uQnV0dG9uQ2xpY2soZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9uIGJ1dHRvbiBjbGljayBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZSAtIEV2ZW50IG9iamVjdFxuICAgKi9cblxuICBvbkJ1dHRvbkNsaWNrKGUpIHtcbiAgICB0aGlzLmNhbGxiYWNrKCk7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblxuIiwiLyoqXG4gKiBDcmVhdGUgYSBjb250cm9sXG4gKi9cblxuY2xhc3MgQ29udHJvbCB7XG5cbiAgY29uc3RydWN0b3IoZnV0eiwgY29uZmlnKSB7XG4gICAgdGhpcy5mdXR6ID0gZnV0ejtcbiAgICB0aGlzLnR5cGUgPSBjb25maWcudHlwZTtcbiAgICB0aGlzLmlkID0gY29uZmlnLmlkO1xuICAgIHRoaXMudGl0bGUgPSBjb25maWcudGl0bGU7XG4gICAgdGhpcy5kZWZhdWx0ID0gY29uZmlnLmRlZmF1bHQ7XG4gICAgdGhpcy5yYW5kb21pemFibGUgPSBjb25maWcucmFuZG9taXphYmxlICE9PSB1bmRlZmluZWQgPyBjb25maWcucmFuZG9taXphYmxlIDogdHJ1ZTtcbiAgICB0aGlzLm11dGFibGUgPSBjb25maWcubXV0YWJsZSAhPT0gdW5kZWZpbmVkID8gY29uZmlnLm11dGFibGUgOiB0cnVlO1xuICAgIHRoaXMubG9ja2VkID0gY29uZmlnLmxvY2tlZCAhPT0gdW5kZWZpbmVkID8gY29uZmlnLmxvY2tlZCA6IGZhbHNlO1xuICAgIHRoaXMudmFsdWUgPSB0aGlzLmRlZmF1bHQ7XG5cbiAgICB0aGlzLmNyZWF0ZURPTSgpO1xuICB9XG5cbiAgY3JlYXRlRE9NKCkge1xuICAgIHRoaXMuZG9tID0ge307XG5cbiAgICAvLyBjb250cm9sXG4gICAgdGhpcy5kb20uY29udHJvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZG9tLmNvbnRyb2wuY2xhc3NMaXN0LmFkZChgJHt0aGlzLmZ1dHoubmFtZXNwYWNlfS1jb250cm9sYCk7XG5cbiAgICAvLyB0aXRsZVxuICAgIHRoaXMuZG9tLnRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICB0aGlzLmRvbS50aXRsZS5jbGFzc0xpc3QuYWRkKGAke3RoaXMuZnV0ei5uYW1lc3BhY2V9LWNvbnRyb2wtdGl0bGVgKTtcbiAgICB0aGlzLmRvbS50aXRsZS50ZXh0Q29udGVudCA9IHRoaXMudGl0bGU7XG4gICAgdGhpcy5kb20uY29udHJvbC5hcHBlbmRDaGlsZCh0aGlzLmRvbS50aXRsZSk7XG5cbiAgICAvLyB2YWx1ZVxuICAgIHRoaXMuZG9tLnZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB0aGlzLmRvbS52YWx1ZS5jbGFzc0xpc3QuYWRkKGAke3RoaXMuZnV0ei5uYW1lc3BhY2V9LWNvbnRyb2wtdmFsdWVgKTtcbiAgICB0aGlzLmRvbS5jb250cm9sLmFwcGVuZENoaWxkKHRoaXMuZG9tLnZhbHVlKTtcblxuICAgIC8vIGFkZCBjb250cm9sIHRvIHBhbmVsXG4gICAgdGhpcy5mdXR6LmRvbS5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmRvbS5jb250cm9sKTtcbiAgfVxuXG4gIGxvY2soKSB7XG4gICAgdGhpcy5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgdW5sb2NrKCkge1xuICAgIHRoaXMubG9ja2VkID0gZmFsc2U7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2w7XG4iLCJjb25zdCBDb250cm9sID0gcmVxdWlyZSgnLi9jb250cm9sJyk7XG5jb25zdCBDYWxjID0gcmVxdWlyZSgnLi4vdXRpbC9jYWxjJyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgcmFuZ2UgY29udHJvbFxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBmdXR6IC0gUmVmZXJlbmNlIHRvIHBhcmVudCBGdXR6IGluc3RhbmNlXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWcuaWQgLSBVbmlxdWUgaWQvc2x1Z1xuICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZy50aXRsZSAtIFVJIGRpc3BsYXkgdGl0bGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb25maWcubWluIC0gTWluaW11bSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGNvbmZpZy5tYXggLSBNYXhpbXVtIHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gY29uZmlnLnN0ZXAgLSBTdGVwIHNpemVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb25maWcuZGVmYXVsdCAtIFN0YXJ0aW5nIHZhbHVlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNvbmZpZy5yYW5kb21pemFibGUgLSBDYW4gYmUgcmFuZG9taXplZCBpbmRpdmlkdWFsbHkgYW5kIGJ5IHJhbmRvbWl6aW5nIGFsbFxuICogQHBhcmFtIHtib29sZWFufSBjb25maWcubXV0YWJsZSAtIENhbiBiZSBtdXRhdGVkIGluZGl2aWR1YWxseSBhbmQgYnkgbXV0YXRpbmcgYWxsXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNvbmZpZy5sb2NrZWQgLSBUZW1wb3JhcmlseSB0b2dnbGUgd2hldGhlciB0aGUgY29udHJvbCBpcyBhZmZlY3RlZCBieSByYW5kb21pemF0aW9uIGFuZCBtdXRhdGlvblxuICpcbiAqIEBleHRlbmRzIENvbnRyb2xcbiAqXG4gKiBAcmVxdWlyZXMge0BsaW5rIENvbnRyb2x9XG4gKiBAcmVxdWlyZXMge0BsaW5rIENhbGN9XG4gKi9cblxuY2xhc3MgUmFuZ2UgZXh0ZW5kcyBDb250cm9sIHtcblxuICBjb25zdHJ1Y3RvcihmdXR6LCBjb25maWcpIHtcbiAgICBzdXBlcihmdXR6LCBjb25maWcpO1xuICAgIHRoaXMudHlwZSA9ICdyYW5nZSc7XG5cbiAgICB0aGlzLm1pbiA9IGNvbmZpZy5taW47XG4gICAgdGhpcy5tYXggPSBjb25maWcubWF4O1xuICAgIHRoaXMuc3RlcCA9IGNvbmZpZy5zdGVwICE9PSB1bmRlZmluZWQgPyBNYXRoLmFicyhjb25maWcuc3RlcCkgOiAxO1xuICAgIHRoaXMucGxhY2VzID0gdGhpcy5zdGVwLnRvU3RyaW5nKCkuaW5kZXhPZignLicpID4gLTEgPyB0aGlzLnN0ZXAudG9TdHJpbmcoKS5zcGxpdCgnLicpWzFdLmxlbmd0aCA6IDA7XG4gICAgdGhpcy52YWx1ZVRhcmdldCA9IHRoaXMudmFsdWU7XG5cbiAgICB0aGlzLm1vdXNlSXNEb3duID0gZmFsc2U7XG4gICAgdGhpcy5zZXR0bGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLmxpc3RlbigpO1xuXG4gICAgdGhpcy5zZXQodGhpcy52YWx1ZSk7XG4gIH1cblxuICBjcmVhdGVET00oKSB7XG4gICAgc3VwZXIuY3JlYXRlRE9NKCk7XG5cbiAgICAvLyByYW5nZVxuICAgIHRoaXMuZG9tLnJhbmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kb20ucmFuZ2UuY2xhc3NMaXN0LmFkZChgJHt0aGlzLmZ1dHoubmFtZXNwYWNlfS1jb250cm9sLXJhbmdlYCk7XG5cbiAgICAvLyByYW5nZSBpbm5lclxuICAgIHRoaXMuZG9tLnJhbmdlSW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmRvbS5yYW5nZUlubmVyLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5mdXR6Lm5hbWVzcGFjZX0tY29udHJvbC1yYW5nZS1pbm5lcmApO1xuICAgIHRoaXMuZG9tLnJhbmdlLmFwcGVuZENoaWxkKHRoaXMuZG9tLnJhbmdlSW5uZXIpO1xuICAgIFxuICAgIHRoaXMuZG9tLmNvbnRyb2wuYXBwZW5kQ2hpbGQodGhpcy5kb20ucmFuZ2UpO1xuICB9XG5cbiAgbGlzdGVuKCkge1xuICAgIHRoaXMuZG9tLnZhbHVlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB0aGlzLm9uVmFsdWVDaGFuZ2UoZSkpO1xuICAgIHRoaXMuZG9tLnJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB0aGlzLm9uVmFsdWVNb3VzZWRvd24oZSkpO1xuICB9XG5cbiAgb25WYWx1ZUNoYW5nZShlKSB7XG4gICAgdGhpcy5zZXQodGhpcy5kb20udmFsdWUudmFsdWUpO1xuICAgIHRoaXMudmFsdWVUYXJnZXQgPSB0aGlzLnZhbHVlO1xuICB9XG5cbiAgb25WYWx1ZU1vdXNlZG93bihlKSB7XG4gICAgdGhpcy5mdXR6Lm1vdXNlLmRvd24gPSB0cnVlO1xuICAgIHRoaXMuZnV0ei5tb3VzZS5hbmNob3IueCA9IGUuY2xpZW50WDtcbiAgICB0aGlzLmZ1dHoubW91c2UuYW5jaG9yLnkgPSBlLmNsaWVudFk7XG4gICAgdGhpcy5tb3VzZUlzRG93biA9IHRydWU7XG4gICAgdGhpcy5zZXREcmFnVmFsdWUoKTtcbiAgfVxuXG4gIG9uV2luZG93TW91c2V1cChlKSB7XG4gICAgdGhpcy5tb3VzZUlzRG93biA9IGZhbHNlO1xuICB9XG5cbiAgb25XaW5kb3dNb3VzZW1vdmUoZSkge1xuICAgIGlmKHRoaXMubW91c2VJc0Rvd24pIHtcbiAgICAgIHRoaXMuc2V0RHJhZ1ZhbHVlKCk7XG4gICAgfVxuICB9XG5cbiAgcmFuZG9taXplKCkge1xuICAgIHRoaXMuc2V0dGxlZCA9IGZhbHNlO1xuICAgIHRoaXMudmFsdWVUYXJnZXQgPSBDYWxjLnJhbmQodGhpcy5taW4sIHRoaXMubWF4KTtcbiAgfVxuXG4gIHNldERyYWdWYWx1ZSgpIHtcbiAgICBsZXQgbGVmdCA9IHRoaXMuZG9tLnJhbmdlLm9mZnNldExlZnQ7XG4gICAgbGV0IHdpZHRoID0gdGhpcy5kb20ucmFuZ2Uub2Zmc2V0V2lkdGg7XG4gICAgbGV0IHZhbCA9IENhbGMubWFwKHRoaXMuZnV0ei5tb3VzZS54LCBsZWZ0LCBsZWZ0ICsgd2lkdGgsIHRoaXMubWluLCB0aGlzLm1heCk7XG4gICAgdGhpcy5zZXQodmFsKTtcbiAgICB0aGlzLnZhbHVlVGFyZ2V0ID0gdGhpcy52YWx1ZTtcbiAgfVxuXG4gIGVhc2VTZXQoKSB7XG4gICAgaWYoTWF0aC5hYnModGhpcy52YWx1ZSAtIHRoaXMudmFsdWVUYXJnZXQpID4gdGhpcy5zdGVwIC8gMikge1xuICAgICAgdGhpcy52YWx1ZSArPSAodGhpcy52YWx1ZVRhcmdldCAtIHRoaXMudmFsdWUpICogMC4yO1xuICAgICAgdGhpcy5zZXQodGhpcy52YWx1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0dGxlZCA9IHRydWU7XG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZVRhcmdldDtcbiAgICAgIHRoaXMuc2V0KHRoaXMudmFsdWUpOyBcbiAgICB9XG4gIH1cblxuICBzZXQodmFsLCBieXBhc3NSb3VuZGluZykge1xuICAgIC8vIHNhbml0aXplIHZhbHVlXG4gICAgdmFsID0gcGFyc2VGbG9hdCh2YWwpO1xuICAgIHZhbCA9IGlzTmFOKHZhbCkgPyB0aGlzLmRlZmF1bHQgOiB2YWw7XG4gICAgdmFsID0gQ2FsYy5jbGFtcCh2YWwsIHRoaXMubWluLCB0aGlzLm1heCk7XG4gICAgdmFsID0gYnlwYXNzUm91bmRpbmcgPyB2YWwgOiBDYWxjLnJvdW5kVG9OZWFyZXN0SW50ZXJ2YWwodmFsLCB0aGlzLnN0ZXApO1xuICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gICAgXG4gICAgLy8gc2V0IGlucHV0IHZhbHVlXG4gICAgdGhpcy5kb20udmFsdWUudmFsdWUgPSB0aGlzLnZhbHVlLnRvRml4ZWQodGhpcy5wbGFjZXMpO1xuICAgIFxuICAgIC8vIHNldCByYW5nZSB2YWx1ZVxuICAgIHRoaXMuZG9tLnJhbmdlSW5uZXIuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlWCgke0NhbGMubWFwKHRoaXMudmFsdWUsIHRoaXMubWluLCB0aGlzLm1heCwgMCwgMSl9KWA7XG4gICAgXG4gICAgLy8gc2V0IHRoZSB0aXRsZSBhdHRyaWJ1dGUgZm9yIHRoZSBjb250cm9sXG4gICAgdGhpcy5kb20uY29udHJvbC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgYCR7dGhpcy50aXRsZX06ICR7dGhpcy52YWx1ZS50b0ZpeGVkKHRoaXMucGxhY2VzKX1gKTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmFuZ2U7XG4iLCJjb25zdCBCdXR0b24gPSByZXF1aXJlKCcuL2J1dHRvbicpO1xuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuL2NvbnRyb2xzL3JhbmdlJyk7XG5jb25zdCBDYWxjID0gcmVxdWlyZSgnLi91dGlsL2NhbGMnKTtcblxuY2xhc3MgRnV0eiB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIEZ1dHogY29udHJvbCBwYW5lbFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBvYmplY3RcbiAgICogQHBhcmFtIHtvYmplY3R8c3RyaW5nfSBbY29uZmlnLmNvbnRhaW5lcj1kb2N1bWVudC5ib2R5XSAtIERPTSBlbGVtZW50IG9yIENTUyBzZWxlY3RvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbmZpZy50aXRsZT1cIkNvbnRyb2wgUGFuZWxcIl0gLSBUaXRsZSBvZiB0aGUgcGFuZWxcbiAgICpcbiAgICogQHJlcXVpcmVzIHtAbGluayBCdXR0b259XG4gICAqIEByZXF1aXJlcyB7QGxpbmsgUmFuZ2V9XG4gICAqIEByZXF1aXJlcyB7QGxpbmsgQ2FsY31cbiAgICovXG5cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5uYW1lc3BhY2UgPSAnZnV0eic7XG4gICAgdGhpcy5jb250cm9scyA9IHt9O1xuICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xuXG4gICAgdGhpcy5tb3VzZSA9IHtcbiAgICAgIGRvd246IGZhbHNlLFxuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBhbmNob3I6IHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMFxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgICB0aGlzLnJhZiA9IG51bGw7XG5cbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbmZpZy5jb250YWluZXIgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy5jb250YWluZXIgOiBkb2N1bWVudC5ib2R5O1xuICAgIHRoaXMudGl0bGUgPSBjb25maWcudGl0bGUgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy50aXRsZSA6ICdGdXR6JztcbiAgICBcbiAgICB0aGlzLmNyZWF0ZURPTSgpO1xuICAgIHRoaXMubGlzdGVuKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIG5lY2Vzc2FyeSBET00gZWxlbWVudHNcbiAgICovXG5cbiAgY3JlYXRlRE9NKCkge1xuICAgIHRoaXMuZG9tID0ge307XG5cbiAgICAvLyBjb250YWluZXJcbiAgICB0aGlzLmRvbS5jb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcblxuICAgIC8vIHBhbmVsXG4gICAgdGhpcy5kb20ucGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmRvbS5wYW5lbC5jbGFzc0xpc3QuYWRkKGAke3RoaXMubmFtZXNwYWNlfS1wYW5lbGApO1xuXG4gICAgLy8gdGl0bGVcbiAgICB0aGlzLmRvbS50aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gICAgdGhpcy5kb20udGl0bGUuY2xhc3NMaXN0LmFkZChgJHt0aGlzLm5hbWVzcGFjZX0tdGl0bGVgKTtcbiAgICB0aGlzLmRvbS50aXRsZS50ZXh0Q29udGVudCA9IHRoaXMudGl0bGU7XG4gICAgdGhpcy5kb20ucGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5kb20udGl0bGUpO1xuXG4gICAgLy8gY29udHJvbHNcbiAgICB0aGlzLmRvbS5jb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZG9tLmNvbnRyb2xzLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5uYW1lc3BhY2V9LWNvbnRyb2xzYCk7XG4gICAgdGhpcy5kb20ucGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5kb20uY29udHJvbHMpO1xuXG4gICAgLy8gYWRkIHBhbmVsIHRvIGNvbnRhaW5lclxuICAgIHRoaXMuZG9tLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmRvbS5wYW5lbCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuXG4gIGxpc3RlbigpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChlKSA9PiB0aGlzLm9uV2luZG93TW91c2V1cChlKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChlKSA9PiB0aGlzLm9uV2luZG93TW91c2Vtb3ZlKGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPbiB3aW5kb3cgbW91c2UgdXAgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGUgLSBFdmVudCBvYmplY3RcbiAgICovXG5cbiAgb25XaW5kb3dNb3VzZXVwKGUpIHtcbiAgICB0aGlzLm1vdXNlLmRvd24gPSBmYWxzZTtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLmNvbnRyb2xzKSB7XG4gICAgICBsZXQgY29udHJvbCA9IHRoaXMuY29udHJvbHNba2V5XTtcbiAgICAgIGNvbnRyb2wub25XaW5kb3dNb3VzZXVwKGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPbiB3aW5kb3cgbW91c2UgbW92ZSBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZSAtIEV2ZW50IG9iamVjdFxuICAgKi9cblxuICBvbldpbmRvd01vdXNlbW92ZShlKSB7XG4gICAgdGhpcy5tb3VzZS54ID0gZS5jbGllbnRYO1xuICAgIHRoaXMubW91c2UueSA9IGUuY2xpZW50WTtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLmNvbnRyb2xzKSB7XG4gICAgICBsZXQgY29udHJvbCA9IHRoaXMuY29udHJvbHNba2V5XTtcbiAgICAgIGNvbnRyb2wub25XaW5kb3dNb3VzZW1vdmUoZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBiYXNlZCBvbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKVxuICAgKi9cblxuICB1cGRhdGUoKSB7XG4gICAgdGhpcy5uZWVkc1VwZGF0ZSA9IGZhbHNlO1xuICAgIGZvcihsZXQga2V5IGluIHRoaXMuY29udHJvbHMpIHtcbiAgICAgIGlmKHRoaXMuY29udHJvbHNba2V5XS50eXBlID09PSAncmFuZ2UnKSB7XG4gICAgICAgIHRoaXMuY29udHJvbHNba2V5XS5lYXNlU2V0KCk7XG4gICAgICAgIGlmKCF0aGlzLmNvbnRyb2xzW2tleV0uc2V0dGxlZCkge1xuICAgICAgICAgIHRoaXMubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYodGhpcy5uZWVkc1VwZGF0ZSkge1xuICAgICAgdGhpcy5yYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy51cGRhdGUoKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGJ1dHRvblxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBvYmplY3RcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZy5pZCAtIElEIHNsdWdcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZy50aXRsZSAtIFRpdGxlIHRleHRcbiAgICogQHBhcmFtIHtvYmplY3R9IFtjb25maWcuY2FsbGJhY2s9KCkgPT4ge31dIC0gQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIGJ1dHRvbiBwcmVzc1xuICAgKi9cblxuICBhZGRCdXR0b24oY29uZmlnKSB7XG4gICAgdGhpcy5idXR0b25zW2NvbmZpZy5pZF0gPSBuZXcgQnV0dG9uKHRoaXMsIGNvbmZpZyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcmFuZ2UgY29udHJvbCB2aWEge0BsaW5rY29kZSBSYW5nZX1cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWcuaWQgLSBVbmlxdWUgaWQvc2x1Z1xuICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnLnRpdGxlIC0gVUkgZGlzcGxheSB0aXRsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gY29uZmlnLm1pbiAtIE1pbmltdW0gdmFsdWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvbmZpZy5tYXggLSBNYXhpbXVtIHZhbHVlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb25maWcuc3RlcCAtIFN0ZXAgc2l6ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gY29uZmlnLmRlZmF1bHQgLSBTdGFydGluZyB2YWx1ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbmZpZy5yYW5kb21pemFibGUgLSBDYW4gYmUgcmFuZG9taXplZCBpbmRpdmlkdWFsbHkgYW5kIGJ5IHJhbmRvbWl6aW5nIGFsbFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbmZpZy5tdXRhYmxlIC0gQ2FuIGJlIG11dGF0ZWQgaW5kaXZpZHVhbGx5IGFuZCBieSBtdXRhdGluZyBhbGxcbiAgICogQHBhcmFtIHtib29sZWFufSBjb25maWcubG9ja2VkIC0gVGVtcG9yYXJpbHkgdG9nZ2xlIHdoZXRoZXIgdGhlIGNvbnRyb2wgaXMgYWZmZWN0ZWQgYnkgcmFuZG9taXphdGlvbiBhbmQgbXV0YXRpb25cbiAgICovXG5cbiAgYWRkUmFuZ2UoY29uZmlnKSB7XG4gICAgbGV0IGNvbnRyb2wgPSBuZXcgUmFuZ2UodGhpcywgY29uZmlnKTtcbiAgICB0aGlzLmNvbnRyb2xzW2NvbnRyb2wuaWRdID0gY29udHJvbDtcbiAgfVxuXG4gIGdldChpZCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xzW2lkXS52YWx1ZTtcbiAgfVxuXG4gIHJhbmRvbWl6ZSgpIHtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLmNvbnRyb2xzKSB7XG4gICAgICB0aGlzLmNvbnRyb2xzW2tleV0ucmFuZG9taXplKCk7XG4gICAgfVxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgbXV0YXRlKCkge1xuICAgIGZvcihsZXQga2V5IGluIHRoaXMuY29udHJvbHMpIHtcbiAgICAgIGxldCBjb250cm9sID0gdGhpcy5jb250cm9sc1trZXldO1xuICAgICAgbGV0IHNpemUgPSAoY29udHJvbC5tYXggLSBjb250cm9sLm1pbikgLyAxNTtcbiAgICAgIGNvbnRyb2wuc2V0dGxlZCA9IGZhbHNlO1xuICAgICAgaWYoY29udHJvbC52YWx1ZSA8PSBjb250cm9sLm1pbikge1xuICAgICAgICBjb250cm9sLnZhbHVlVGFyZ2V0ID0gQ2FsYy5yYW5kKGNvbnRyb2wuc3RlcCwgY29udHJvbC5taW4gKyBzaXplKTtcbiAgICAgIH0gZWxzZSBpZihjb250cm9sLnZhbHVlID49IGNvbnRyb2wubWF4KSB7XG4gICAgICAgIGNvbnRyb2wudmFsdWVUYXJnZXQgPSBDYWxjLnJhbmQoY29udHJvbC5tYXggLSBzaXplLCBjb250cm9sLm1heCAtIGNvbnRyb2wuc3RlcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250cm9sLnZhbHVlVGFyZ2V0ID0gY29udHJvbC52YWx1ZSArIENhbGMucmFuZCgtc2l6ZSwgc2l6ZSk7XG4gICAgICB9XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJhZik7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gRnV0ejtcbiIsIi8qKlxuICogQ2FsY3VsYXRpb24gZnVuY3Rpb25zIGFuZCBoZWxwZXJzXG4gKi9cblxuY2xhc3MgQ2FsYyB7XG5cbiAgLyoqXG4gICogR2V0IGEgcmFuZG9tIGZsb2F0IHdpdGhpbiBhIHJhbmdlLiBJZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWQsIGl0IGlzIHVzZWQgYXMgdGhlIG1heCBhbmQgdGhlIG1pbiBiZWNvbWVzIHplcm8uXG4gICpcbiAgKiBAcGFyYW0ge251bWJlcn0gbWluIC0gTWluaW11bSByYW5nZSB2YWx1ZVxuICAqIEBwYXJhbSB7bnVtYmVyfSBtYXggLSBNYXhpbXVtIHJhbmdlIHZhbHVlXG4gICpcbiAgKiBAZXhhbXBsZVxuICAqIC8vIHR3byBhcmd1bWVudHNcbiAgKiBDYWxjLnJhbmQoMiwgMTgpO1xuICAqIC8vIC0+IHJhbmRvbSBmbG9hdCBiZXR3ZWVuIDIgYW5kIDE4XG4gICpcbiAgKiAvLyBzaW5nbGUgYXJndW1lbnRcbiAgKiBDYWxjLnJhbmQoNDIuNSk7XG4gICogLy8gLT4gcmFuZG9tIGZsb2F0IGJldHdlZW4gMCBhbmQgNDIuNVxuICAqXG4gICogQHJldHVybnMge251bWJlcn0gUmFuZG9tIGZsb2F0IHdpdGhpbiB0aGUgcmFuZ2VcbiAgKi9cbiAgc3RhdGljIHJhbmQobWluLCBtYXgpIHtcbiAgICBpZihtYXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgbWF4ID0gbWluO1xuICAgICAgbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjtcbiAgfVxuXG4gIC8qKlxuICAqIENsYW1wIGEgdmFsdWUgdG8gYSByYW5nZVxuICAqXG4gICogQHBhcmFtIHtudW1iZXJ9IHZhbCAtIElucHV0IHZhbHVlXG4gICogQHBhcmFtIHtudW1iZXJ9IG1pbiAtIE1pbmltdW0gcmFuZ2UgdmFsdWVcbiAgKiBAcGFyYW0ge251bWJlcn0gbWF4IC0gTWF4aW11bSByYW5nZSB2YWx1ZVxuICAqXG4gICogQGV4YW1wbGVcbiAgKiBDYWxjLmNsYW1wKDMsIDEwLCAxNTApO1xuICAqIC8vIC0+IDEwXG4gICpcbiAgKiBDYWxjLmNsYW1wKDQwMCwgMTAsIDE1MCk7XG4gICogLy8gLT4gMTUwXG4gICpcbiAgKiBDYWxjLmNsYW1wKDc1LCAxMCwgMTAwKTtcbiAgKiAvLyAtPiA3NVxuICAqXG4gICogQHJldHVybnMge251bWJlcn0gQ2xhbXBlZCB2YWx1ZSB3aXRoaW4gcmFuZ2VcbiAgKi9cblxuICBzdGF0aWMgY2xhbXAodmFsLCBtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbih2YWwsIG1heCksIG1pbik7XG4gIH1cblxuICBzdGF0aWMgbWFwKHZhbCwgaW5NaW4sIGluTWF4LCBvdXRNaW4sIG91dE1heCkge1xuICAgIHJldHVybiAoKG91dE1heCAtIG91dE1pbikgKiAoKHZhbCAtIGluTWluKSAvIChpbk1heCAtIGluTWluKSkpICsgb3V0TWluO1xuICB9XG5cbiAgc3RhdGljIHJvdW5kVG9OZWFyZXN0SW50ZXJ2YWwodmFsdWUsIGludGVydmFsKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgLyBpbnRlcnZhbCkgKiBpbnRlcnZhbDtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FsYztcbiJdfQ=="}