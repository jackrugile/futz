{"version":3,"names":[],"mappings":"","sources":["futz.min.js"],"sourcesContent":["!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).Futz=t()}}(function(){return function t(e,n,o){function i(a,r){if(!n[a]){if(!e[a]){var u=\"function\"==typeof require&&require;if(!r&&u)return u(a,!0);if(s)return s(a,!0);var l=new Error(\"Cannot find module '\"+a+\"'\");throw l.code=\"MODULE_NOT_FOUND\",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,o)}return n[a].exports}for(var s=\"function\"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){\"use strict\";var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.futz=e,this.id=n.id,this.title=n.title,this.callback=n.callback,this.createDOM(),this.listen()}return o(t,[{key:\"createDOM\",value:function(){this.dom={},this.dom.control=document.createElement(\"div\"),this.dom.control.classList.add(this.futz.namespace+\"-control\"),this.dom.button=document.createElement(\"button\"),this.dom.button.classList.add(this.futz.namespace+\"-control-button\"),this.dom.button.textContent=this.title,this.dom.control.appendChild(this.dom.button),this.futz.dom.controls.appendChild(this.dom.control)}},{key:\"listen\",value:function(){var t=this;this.dom.button.addEventListener(\"click\",function(e){return t.onButtonClick(e)})}},{key:\"onButtonClick\",value:function(t){this.callback()}}]),t}();e.exports=i},{}],2:[function(t,e,n){\"use strict\";var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.futz=e,this.type=n.type,this.id=n.id,this.title=n.title,this.default=n.default,this.randomizable=void 0===n.randomizable||n.locked,this.mutable=void 0===n.mutable||n.mutable,this.locked=void 0!==n.locked&&n.locked,this.value=this.default,this.createDOM()}return o(t,[{key:\"createDOM\",value:function(){this.dom={},this.dom.control=document.createElement(\"div\"),this.dom.control.classList.add(this.futz.namespace+\"-control\"),this.dom.title=document.createElement(\"h3\"),this.dom.title.classList.add(this.futz.namespace+\"-control-title\"),this.dom.title.textContent=this.title,this.dom.control.appendChild(this.dom.title),this.dom.value=document.createElement(\"input\"),this.dom.value.classList.add(this.futz.namespace+\"-control-value\"),this.dom.control.appendChild(this.dom.value),this.futz.dom.controls.appendChild(this.dom.control)}},{key:\"lock\",value:function(){this.locked=!0}},{key:\"unlock\",value:function(){this.locked=!1}}]),t}();e.exports=i},{}],3:[function(t,e,n){\"use strict\";var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=t(\"./futz-control\"),s=function(t){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i);function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.min=n.min,o.max=n.max,o.step=void 0!==n.step?Math.abs(n.step):1,o.places=o.step.toString().indexOf(\".\")>-1?o.step.toString().split(\".\")[1].length:0,o.valueTarget=o.value,o.mouseIsDown=!1,o.settled=!1,o.listen(),o.set(o.value),o}return o(e,[{key:\"createDOM\",value:function(){(function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,n,o)}if(\"value\"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(o)})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"createDOM\",this).call(this),this.dom.range=document.createElement(\"div\"),this.dom.range.classList.add(this.futz.namespace+\"-control-range\"),this.dom.rangeInner=document.createElement(\"div\"),this.dom.rangeInner.classList.add(this.futz.namespace+\"-control-range-inner\"),this.dom.range.appendChild(this.dom.rangeInner),this.dom.control.appendChild(this.dom.range)}},{key:\"listen\",value:function(){var t=this;this.dom.value.addEventListener(\"change\",function(e){return t.onValueChange(e)}),this.dom.range.addEventListener(\"mousedown\",function(e){return t.onValueMousedown(e)})}},{key:\"onValueChange\",value:function(t){this.set(this.dom.value.value),this.valueTarget=this.value}},{key:\"onValueMousedown\",value:function(t){this.futz.mouse.down=!0,this.futz.mouse.anchor.x=t.clientX,this.futz.mouse.anchor.y=t.clientY,this.mouseIsDown=!0,this.setDragValue()}},{key:\"onWindowMouseup\",value:function(t){this.mouseIsDown=!1}},{key:\"onWindowMousemove\",value:function(t){this.mouseIsDown&&this.setDragValue()}},{key:\"setDragValue\",value:function(){var t=this.dom.range.offsetLeft,e=this.dom.range.offsetWidth,n=this.futz.map(this.futz.mouse.x,t,t+e,this.min,this.max);this.set(n),this.valueTarget=this.value}},{key:\"easeSet\",value:function(){Math.abs(this.value-this.valueTarget)>this.step/2?(this.value+=.2*(this.valueTarget-this.value),this.set(this.value,!0)):(this.settled=!0,this.value=this.valueTarget,this.set(this.value))}},{key:\"set\",value:function(t,e){t=parseFloat(t),t=isNaN(t)?this.default:t,t=this.futz.clamp(t,this.min,this.max),t=e?t:this.futz.roundToNearestInterval(t,this.step),this.value=t,this.dom.value.value=this.value.toFixed(this.places),this.dom.rangeInner.style.transform=\"scaleX(\"+this.futz.map(this.value,this.min,this.max,0,1)+\")\",this.dom.control.setAttribute(\"title\",this.title+\": \"+this.value.toFixed(this.places))}}]),e}();e.exports=s},{\"./futz-control\":2}],4:[function(t,e,n){\"use strict\";var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=t(\"./futz-button\"),s=t(\"./futz-range-control\"),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.controls={},this.buttons={},this.mouse={down:!1,x:0,y:0,anchor:{x:0,y:0}},this.needsUpdate=!1,this.raf=null,this.container=void 0!==e.container?e.container:document.body,this.namespace=void 0!==e.namespace?e.namespace:\"futz\",this.title=void 0!==e.title?e.title:\"Futz\",this.createDOM(),this.listen()}return o(t,[{key:\"createDOM\",value:function(){this.dom={},this.dom.container=this.container,this.dom.panel=document.createElement(\"div\"),this.dom.panel.classList.add(this.namespace+\"-panel\"),this.dom.title=document.createElement(\"h1\"),this.dom.title.classList.add(this.namespace+\"-title\"),this.dom.title.textContent=this.title,this.dom.panel.appendChild(this.dom.title),this.dom.controls=document.createElement(\"div\"),this.dom.controls.classList.add(this.namespace+\"-controls\"),this.dom.panel.appendChild(this.dom.controls),this.dom.container.appendChild(this.dom.panel)}},{key:\"listen\",value:function(){var t=this;window.addEventListener(\"mouseup\",function(e){return t.onWindowMouseup(e)}),window.addEventListener(\"mousemove\",function(e){return t.onWindowMousemove(e)})}},{key:\"onWindowMouseup\",value:function(t){this.mouse.down=!1;for(var e in this.controls){this.controls[e].onWindowMouseup(t)}}},{key:\"onWindowMousemove\",value:function(t){this.mouse.x=t.clientX,this.mouse.y=t.clientY;for(var e in this.controls){this.controls[e].onWindowMousemove(t)}}},{key:\"update\",value:function(){var t=this;this.needsUpdate=!1;for(var e in this.controls)\"range\"===this.controls[e].type&&(this.controls[e].easeSet(),this.controls[e].settled||(this.needsUpdate=!0));this.needsUpdate&&(this.raf=requestAnimationFrame(function(){return t.update()}))}},{key:\"addButton\",value:function(t){for(var e in this.buttons)if(t.id===this.buttons[e].id)return void console.error(\"Futz: A button with an id of '\"+t.id+\"' is already in use.\");this.buttons[t.id]=new i(this,t)}},{key:\"addControl\",value:function(t){var e=null;for(var n in this.controls)if(t.id===this.controls[n].id)return void console.error(\"Futz: A control with an id of '\"+t.id+\"' is already in use.\");switch(t.type){case\"range\":e=new s(this,t)}e&&(this.controls[e.id]=e)}},{key:\"get\",value:function(t){return this.controls[t].value}},{key:\"randomize\",value:function(){for(var t in this.controls){var e=this.controls[t];e.settled=!1,e.valueTarget=this.rand(e.min,e.max),cancelAnimationFrame(this.raf),this.update()}}},{key:\"mutate\",value:function(){for(var t in this.controls){var e=this.controls[t],n=(e.max-e.min)/15;e.settled=!1,e.value<=e.min?e.valueTarget=this.rand(e.step,e.min+n):e.value>=e.max?e.valueTarget=this.rand(e.max-n,e.max-e.step):e.valueTarget=e.value+this.rand(-n,n),cancelAnimationFrame(this.raf),this.update()}}},{key:\"rand\",value:function(t,e,n){void 0===e&&(e=t,t=0);return Math.random()*(e-t)+t}},{key:\"clamp\",value:function(t,e,n){return Math.max(Math.min(t,n),e)}},{key:\"map\",value:function(t,e,n,o,i){return(t-e)/(n-e)*(i-o)+o}},{key:\"roundToNearestInterval\",value:function(t,e){return Math.round(t/e)*e}}]),t}();e.exports=a},{\"./futz-button\":1,\"./futz-range-control\":3}]},{},[4])(4)});"],"file":"../futz.min.js"}