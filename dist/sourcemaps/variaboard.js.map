{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/button.js","src/js/controls/control.js","src/js/controls/range.js","src/js/index.js","src/js/util/calc.js"],"names":[],"mappings":"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","file":"../variaboard.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Create a button\n */\n\nclass Button {\n\n  constructor(variaboard, config) {\n    this.variaboard = variaboard;\n    this.id = config.id;\n    this.title = config.title;\n    this.description = config.description;\n    this.callback = config.callback !== undefined ? config.callback : () => {};\n\n    this.createDOM();\n    this.listen();\n  }\n\n  /**\n   * Create necessary DOM elements\n   */\n\n  createDOM() {\n    this.dom = {};\n\n    // control\n    this.dom.control = document.createElement('div');\n    this.dom.control.classList.add(`${this.variaboard.namespace}-control`);\n\n    // button\n    this.dom.button = document.createElement('button');\n    this.dom.button.classList.add(`${this.variaboard.namespace}-control-button`);\n    this.dom.button.textContent = this.title;\n    this.dom.control.setAttribute('title', `${this.title}: ${this.description}`);\n    this.dom.control.appendChild(this.dom.button);\n\n    // add to control to panel\n    this.variaboard.dom.controls.appendChild(this.dom.control);\n  }\n\n  /**\n   * Setup event listeners\n   */\n\n  listen() {\n    this.dom.button.addEventListener('click', (e) => this.onButtonClick(e));\n  }\n\n  /**\n   * On button click event\n   *\n   * @param {object} e - Event object\n   */\n\n  onButtonClick(e) {\n    this.callback();\n  }\n\n}\n\nmodule.exports = Button\n","/**\n * Create a control\n */\n\nclass Control {\n\n  constructor(variaboard, config) {\n    this.variaboard = variaboard;\n    this.type = config.type;\n    this.id = config.id;\n    this.title = config.title;\n    this.default = config.default;\n    this.randomizable = config.randomizable !== undefined ? config.randomizable : true;\n    this.mutable = config.mutable !== undefined ? config.mutable : true;\n    this.locked = config.locked !== undefined ? config.locked : false;\n    this.value = this.default;\n\n    this.createDOM();\n  }\n\n  createDOM() {\n    this.dom = {};\n\n    // control\n    this.dom.control = document.createElement('div');\n    this.dom.control.classList.add(`${this.variaboard.namespace}-control`);\n\n    // title\n    this.dom.title = document.createElement('h3');\n    this.dom.title.classList.add(`${this.variaboard.namespace}-control-title`);\n    this.dom.title.textContent = this.title;\n    this.dom.control.appendChild(this.dom.title);\n\n    // value\n    this.dom.value = document.createElement('input');\n    this.dom.value.classList.add(`${this.variaboard.namespace}-control-value`);\n    this.dom.control.appendChild(this.dom.value);\n\n    // add control to panel\n    this.variaboard.dom.controls.appendChild(this.dom.control);\n  }\n\n  get() {\n    return this.value;\n  }\n\n  lock() {\n    this.locked = true;\n  }\n\n  unlock() {\n    this.locked = false;\n  }\n\n}\n\nmodule.exports = Control;\n","const Control = require('./control');\nconst Calc = require('../util/calc');\n\n/**\n * Create a range control\n *\n * @param {object} variaboard - Reference to parent VariaBoard instance\n * @param {object} config - Configuration object\n * @param {string} config.id - Unique id/slug\n * @param {string} config.title - UI display title\n * @param {number} config.min - Minimum value\n * @param {number} config.max - Maximum value\n * @param {number} config.step - Step size\n * @param {number} config.default - Starting value\n * @param {boolean} config.randomizable - Can be randomized individually and by randomizing all\n * @param {boolean} config.mutable - Can be mutated individually and by mutating all\n * @param {boolean} config.locked - Temporarily toggle whether the control is affected by randomization and mutation\n *\n * @extends Control\n *\n * @requires {@link Control}\n * @requires {@link Calc}\n */\n\nclass Range extends Control {\n\n  constructor(variaboard, config) {\n    super(variaboard, config);\n    this.type = 'range';\n\n    this.min = config.min;\n    this.max = config.max;\n    this.step = config.step !== undefined ? Math.abs(config.step) : 1;\n    this.places = this.step.toString().indexOf('.') > -1 ? this.step.toString().split('.')[1].length : 0;\n    this.valueTarget = this.value;\n\n    this.mouseIsDown = false;\n    this.settled = false;\n\n    this.listen();\n\n    this.set(this.value);\n  }\n\n  createDOM() {\n    super.createDOM();\n\n    // range\n    this.dom.range = document.createElement('div');\n    this.dom.range.classList.add(`${this.variaboard.namespace}-control-range`);\n\n    // range inner\n    this.dom.rangeInner = document.createElement('div');\n    this.dom.rangeInner.classList.add(`${this.variaboard.namespace}-control-range-inner`);\n    this.dom.range.appendChild(this.dom.rangeInner);\n    \n    this.dom.control.appendChild(this.dom.range);\n  }\n\n  listen() {\n    this.dom.value.addEventListener('change', (e) => this.onValueChange(e));\n    this.dom.range.addEventListener('mousedown', (e) => this.onValueMousedown(e));\n  }\n\n  onValueChange(e) {\n    this.set(this.dom.value.value);\n    this.valueTarget = this.value;\n  }\n\n  onValueMousedown(e) {\n    this.variaboard.mouse.down = true;\n    this.variaboard.mouse.anchor.x = e.clientX;\n    this.variaboard.mouse.anchor.y = e.clientY;\n    this.mouseIsDown = true;\n    this.setDragValue();\n  }\n\n  onWindowMouseup(e) {\n    this.mouseIsDown = false;\n  }\n\n  onWindowMousemove(e) {\n    if(this.mouseIsDown) {\n      this.setDragValue();\n    }\n  }\n\n  randomize() {\n    this.settled = false;\n    this.valueTarget = Calc.rand(this.min, this.max);\n  }\n\n  mutate() {\n    let size = (this.max - this.min) / 15;\n    this.settled = false;\n    this.valueTarget = this.get() + Calc.rand(-size, size);\n  }\n\n  setDragValue() {\n    let left = this.dom.range.offsetLeft;\n    let width = this.dom.range.offsetWidth;\n    let val = Calc.map(this.variaboard.mouse.x, left, left + width, this.min, this.max);\n    this.set(val);\n    this.valueTarget = this.value;\n  }\n\n  easeSet() {\n    if(Math.abs(this.value - this.valueTarget) > this.step / 2) {\n      this.value += (this.valueTarget - this.value) * 0.2;\n      this.set(this.value, true);\n    } else {\n      this.settled = true;\n      this.value = this.valueTarget;\n      this.set(this.value); \n    }\n  }\n\n  set(val, bypassRounding) {\n    // sanitize value\n    val = parseFloat(val);\n    val = isNaN(val) ? this.default : val;\n    val = Calc.clamp(val, this.min, this.max);\n    val = bypassRounding ? val : Calc.roundToNearestInterval(val, this.step);\n    this.value = val;\n    \n    // set input value\n    this.dom.value.value = this.value.toFixed(this.places);\n    \n    // set range value\n    this.dom.rangeInner.style.transform = `scaleX(${Calc.map(this.value, this.min, this.max, 0, 1)})`;\n    \n    // set the title attribute for the control\n    this.dom.control.setAttribute('title', `${this.title}: ${this.value.toFixed(this.places)}`);\n  }\n\n}\n\nmodule.exports = Range;\n","const Button = require('./button');\nconst Range = require('./controls/range');\nconst Calc = require('./util/calc');\n\nclass VariaBoard {\n\n  /**\n   * Create a VariaBoard control panel\n   *\n   * @param {object} config - Configuration object\n   * @param {object|string} [config.container=document.body] - DOM element or CSS selector\n   * @param {string} [config.title] - Title of the panel\n   *\n   * @requires {@link Button}\n   * @requires {@link Range}\n   * @requires {@link Calc}\n   */\n\n  constructor(config) {\n    this.namespace = 'variaboard';\n    this.controls = {};\n    this.buttons = {};\n\n    this.mouse = {\n      down: false,\n      x: 0,\n      y: 0,\n      anchor: {\n        x: 0,\n        y: 0\n      }\n    }\n\n    this.needsUpdate = false;\n    this.raf = null;\n\n    this.container = config.container !== undefined ? config.container : document.body;\n    this.title = config.title !== undefined ? config.title : null;\n    \n    this.createDOM();\n    this.listen();\n  }\n\n  /**\n   * Create necessary DOM elements\n   */\n\n  createDOM() {\n    this.dom = {};\n\n    // container\n    this.dom.container = this.container;\n\n    // panel\n    this.dom.panel = document.createElement('div');\n    this.dom.panel.classList.add(`${this.namespace}-panel`);\n\n    // title\n    if(this.title) {\n      this.dom.title = document.createElement('h1');\n      this.dom.title.classList.add(`${this.namespace}-title`);\n      this.dom.title.textContent = this.title;\n      this.dom.panel.appendChild(this.dom.title);\n    }\n\n    // controls\n    this.dom.controls = document.createElement('div');\n    this.dom.controls.classList.add(`${this.namespace}-controls`);\n    this.dom.panel.appendChild(this.dom.controls);\n\n    // add panel to container\n    this.dom.container.appendChild(this.dom.panel);\n  }\n\n  /**\n   * Setup event listeners\n   */\n\n  listen() {\n    window.addEventListener('mouseup', (e) => this.onWindowMouseup(e));\n    window.addEventListener('mousemove', (e) => this.onWindowMousemove(e));\n  }\n\n  /**\n   * On window mouse up event\n   *\n   * @param {object} e - Event object\n   */\n\n  onWindowMouseup(e) {\n    this.mouse.down = false;\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      control.onWindowMouseup(e);\n    }\n  }\n\n  /**\n   * On window mouse move event\n   *\n   * @param {object} e - Event object\n   */\n\n  onWindowMousemove(e) {\n    this.mouse.x = e.clientX;\n    this.mouse.y = e.clientY;\n    for(let key in this.controls) {\n      let control = this.controls[key];\n      control.onWindowMousemove(e);\n    }\n  }\n\n  /**\n   * Update based on requestAnimationFrame()\n   */\n\n  update() {\n    this.needsUpdate = false;\n    for(let key in this.controls) {\n      if(this.controls[key].type === 'range') {\n        this.controls[key].easeSet();\n        if(!this.controls[key].settled) {\n          this.needsUpdate = true;\n        }\n      }\n    }\n\n    if(this.needsUpdate) {\n      this.raf = requestAnimationFrame(() => this.update());\n    }\n  }\n\n  /**\n   * Add a button\n   *\n   * @param {object} config - Configuration object\n   * @param {object} config.id - ID slug\n   * @param {object} config.title - Title text\n   * @param {object} [config.callback=() => {}] - Callback function for button press\n   *\n   * @returns {object} Button object\n   */\n\n  addButton(config) {\n    this.buttons[config.id] = new Button(this, config);\n    return this.buttons[config.id];\n  }\n\n  /**\n   * Add a range control via {@linkcode Range}\n   *\n   * @param {object} config - Configuration object\n   * @param {string} config.id - Unique id/slug\n   * @param {string} config.title - UI display title\n   * @param {number} config.min - Minimum value\n   * @param {number} config.max - Maximum value\n   * @param {number} config.step - Step size\n   * @param {number} config.default - Starting value\n   * @param {boolean} config.randomizable - Can be randomized individually and by randomizing all\n   * @param {boolean} config.mutable - Can be mutated individually and by mutating all\n   * @param {boolean} config.locked - Temporarily toggle whether the control is affected by randomization and mutation\n   *\n   * @returns {object} Range object\n   */\n\n  addRange(config) {\n    this.controls[config.id] = new Range(this, config);\n    return this.controls[config.id];\n  }\n\n  get(id) {\n    return this.controls[id].get();\n  }\n\n  randomize() {\n    for(let key in this.controls) {\n      this.controls[key].randomize();\n    }\n    cancelAnimationFrame(this.raf);\n    this.update();\n  }\n\n  mutate() {\n    for(let key in this.controls) {\n      this.controls[key].mutate();\n    }\n    cancelAnimationFrame(this.raf);\n    this.update();\n  }\n\n}\n\nmodule.exports = VariaBoard;\n","/**\n * Calculation functions and helpers\n */\n\nclass Calc {\n\n  /**\n  * Get a random float within a range. If only one argument is passed, it is used as the max and the min becomes zero.\n  *\n  * @param {number} min - Minimum range value\n  * @param {number} max - Maximum range value\n  *\n  * @example\n  * // two arguments\n  * Calc.rand(2, 18);\n  * // -> random float between 2 and 18\n  *\n  * // single argument\n  * Calc.rand(42.5);\n  * // -> random float between 0 and 42.5\n  *\n  * @returns {number} Random float within the range\n  */\n  static rand(min, max) {\n    if(max === undefined) {\n      max = min;\n      min = 0;\n    }\n    return Math.random() * (max - min) + min;\n  }\n\n  /**\n  * Clamp a value to a range\n  *\n  * @param {number} val - Input value\n  * @param {number} min - Minimum range value\n  * @param {number} max - Maximum range value\n  *\n  * @example\n  * Calc.clamp(3, 10, 150);\n  * // -> 10\n  *\n  * Calc.clamp(400, 10, 150);\n  * // -> 150\n  *\n  * Calc.clamp(75, 10, 100);\n  * // -> 75\n  *\n  * @returns {number} Clamped value within range\n  */\n\n  static clamp(val, min, max) {\n    return Math.max(Math.min(val, max), min);\n  }\n\n  static map(val, inMin, inMax, outMin, outMax) {\n    return ((outMax - outMin) * ((val - inMin) / (inMax - inMin))) + outMin;\n  }\n\n  static roundToNearestInterval(value, interval) {\n    return Math.round(value / interval) * interval;\n  }\n\n}\n\nmodule.exports = Calc;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYnV0dG9uLmpzIiwic3JjL2pzL2NvbnRyb2xzL2NvbnRyb2wuanMiLCJzcmMvanMvY29udHJvbHMvcmFuZ2UuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvdXRpbC9jYWxjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDQUE7Ozs7SUFJTSxNO0FBRUosa0JBQVksVUFBWixFQUF3QixNQUF4QixFQUFnQztBQUFBOztBQUM5QixTQUFLLFVBQUwsR0FBa0IsVUFBbEI7QUFDQSxTQUFLLEVBQUwsR0FBVSxPQUFPLEVBQWpCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsT0FBTyxLQUFwQjtBQUNBLFNBQUssV0FBTCxHQUFtQixPQUFPLFdBQTFCO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLE9BQU8sUUFBUCxLQUFvQixTQUFwQixHQUFnQyxPQUFPLFFBQXZDLEdBQWtELFlBQU0sQ0FBRSxDQUExRTs7QUFFQSxTQUFLLFNBQUw7QUFDQSxTQUFLLE1BQUw7QUFDRDs7QUFFRDs7Ozs7O2dDQUlZO0FBQ1YsV0FBSyxHQUFMLEdBQVcsRUFBWDs7QUFFQTtBQUNBLFdBQUssR0FBTCxDQUFTLE9BQVQsR0FBbUIsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQW5CO0FBQ0EsV0FBSyxHQUFMLENBQVMsT0FBVCxDQUFpQixTQUFqQixDQUEyQixHQUEzQixDQUFrQyxLQUFLLFVBQUwsQ0FBZ0IsU0FBbEQ7O0FBRUE7QUFDQSxXQUFLLEdBQUwsQ0FBUyxNQUFULEdBQWtCLFNBQVMsYUFBVCxDQUF1QixRQUF2QixDQUFsQjtBQUNBLFdBQUssR0FBTCxDQUFTLE1BQVQsQ0FBZ0IsU0FBaEIsQ0FBMEIsR0FBMUIsQ0FBaUMsS0FBSyxVQUFMLENBQWdCLFNBQWpEO0FBQ0EsV0FBSyxHQUFMLENBQVMsTUFBVCxDQUFnQixXQUFoQixHQUE4QixLQUFLLEtBQW5DO0FBQ0EsV0FBSyxH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LFFBQXBCLEVBQThCO0FBQzVCLGFBQUssUUFBTCxDQUFjLEdBQWQsRUFBbUIsTUFBbkI7QUFDRDtBQUNELDJCQUFxQixLQUFLLEdBQTFCO0FBQ0EsV0FBSyxNQUFMO0FBQ0Q7Ozs7OztBQUlILE9BQU8sT0FBUCxHQUFpQixVQUFqQjs7Ozs7Ozs7O0FDaE1BOzs7O0lBSU0sSTs7Ozs7Ozs7O0FBRUo7Ozs7Ozs7Ozs7Ozs7Ozs7O3lCQWlCWSxHLEVBQUssRyxFQUFLO0FBQ3BCLFVBQUcsUUFBUSxTQUFYLEVBQXNCO0FBQ3BCLGNBQU0sR0FBTjtBQUNBLGNBQU0sQ0FBTjtBQUNEO0FBQ0QsYUFBTyxLQUFLLE1BQUwsTUFBaUIsTUFBTSxHQUF2QixJQUE4QixHQUFyQztBQUNEOztBQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQW9CYSxHLEVBQUssRyxFQUFLLEcsRUFBSztBQUMxQixhQUFPLEtBQUssR0FBTCxDQUFTLEtBQUssR0FBTCxDQUFTLEdBQVQsRUFBYyxHQUFkLENBQVQsRUFBNkIsR0FBN0IsQ0FBUDtBQUNEOzs7d0JBRVUsRyxFQUFLLEssRUFBTyxLLEVBQU8sTSxFQUFRLE0sRUFBUTtBQUM1QyxhQUFRLENBQUMsU0FBUyxNQUFWLEtBQXFCLENBQUMsTUFBTSxLQUFQLEtBQWlCLFFBQVEsS0FBekIsQ0FBckIsQ0FBRCxHQUEwRCxNQUFqRTtBQUNEOzs7MkNBRTZCLEssRUFBTyxRLEVBQVU7QUFDN0MsYUFBTyxLQUFLLEtBQUwsQ0FBVyxRQUFRLFFBQW5CLElBQStCLFFBQXRDO0FBQ0Q7Ozs7OztBQUlILE9BQU8sT0FBUCxHQUFpQixJQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcbiAqIENyZWF0ZSBhIGJ1dHRvblxuICovXG5cbmNsYXNzIEJ1dHRvbiB7XG5cbiAgY29uc3RydWN0b3IodmFyaWFib2FyZCwgY29uZmlnKSB7XG4gICAgdGhpcy52YXJpYWJvYXJkID0gdmFyaWFib2FyZDtcbiAgICB0aGlzLmlkID0gY29uZmlnLmlkO1xuICAgIHRoaXMudGl0bGUgPSBjb25maWcudGl0bGU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGNvbmZpZy5kZXNjcmlwdGlvbjtcbiAgICB0aGlzLmNhbGxiYWNrID0gY29uZmlnLmNhbGxiYWNrICE9PSB1bmRlZmluZWQgPyBjb25maWcuY2FsbGJhY2sgOiAoKSA9PiB7fTtcblxuICAgIHRoaXMuY3JlYXRlRE9NKCk7XG4gICAgdGhpcy5saXN0ZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgbmVjZXNzYXJ5IERPTSBlbGVtZW50c1xuICAgKi9cblxuICBjcmVhdGVET00oKSB7XG4gICAgdGhpcy5kb20gPSB7fTtcblxuICAgIC8vIGNvbnRyb2xcbiAgICB0aGlzLmRvbS5jb250cm9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kb20uY29udHJvbC5jbGFzc0xpc3QuYWRkKGAke3RoaXMudmFyaWFib2FyZC5uYW1lc3BhY2V9LWNvbnRyb2xgKTtcblxuICAgIC8vIGJ1dHRvblxuICAgIHRoaXMuZG9tLmJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHRoaXMuZG9tLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKGAke3RoaXMudmFyaWFib2FyZC5uYW1lc3BhY2V9LWNvbnRyb2wtYnV0dG9uYCk7XG4gICAgdGhpcy5kb20uYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcbiAgICB0aGlzLmRvbS5jb250cm9sLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBgJHt0aGlzLnRpdGxlfTogJHt0aGlzLmRlc2NyaXB0aW9ufWApO1xuICAgIHRoaXMuZG9tLmNvbnRyb2wuYXBwZW5kQ2hpbGQodGhpcy5kb20uYnV0dG9uKTtcblxuICAgIC8vIGFkZCB0byBjb250cm9sIHRvIHBhbmVsXG4gICAgdGhpcy52YXJpYWJvYXJkLmRvbS5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmRvbS5jb250cm9sKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnNcbiAgICovXG5cbiAgbGlzdGVuKCkge1xuICAgIHRoaXMuZG9tLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLm9uQnV0dG9uQ2xpY2soZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9uIGJ1dHRvbiBjbGljayBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZSAtIEV2ZW50IG9iamVjdFxuICAgKi9cblxuICBvbkJ1dHRvbkNsaWNrKGUpIHtcbiAgICB0aGlzLmNhbGxiYWNrKCk7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblxuIiwiLyoqXG4gKiBDcmVhdGUgYSBjb250cm9sXG4gKi9cblxuY2xhc3MgQ29udHJvbCB7XG5cbiAgY29uc3RydWN0b3IodmFyaWFib2FyZCwgY29uZmlnKSB7XG4gICAgdGhpcy52YXJpYWJvYXJkID0gdmFyaWFib2FyZDtcbiAgICB0aGlzLnR5cGUgPSBjb25maWcudHlwZTtcbiAgICB0aGlzLmlkID0gY29uZmlnLmlkO1xuICAgIHRoaXMudGl0bGUgPSBjb25maWcudGl0bGU7XG4gICAgdGhpcy5kZWZhdWx0ID0gY29uZmlnLmRlZmF1bHQ7XG4gICAgdGhpcy5yYW5kb21pemFibGUgPSBjb25maWcucmFuZG9taXphYmxlICE9PSB1bmRlZmluZWQgPyBjb25maWcucmFuZG9taXphYmxlIDogdHJ1ZTtcbiAgICB0aGlzLm11dGFibGUgPSBjb25maWcubXV0YWJsZSAhPT0gdW5kZWZpbmVkID8gY29uZmlnLm11dGFibGUgOiB0cnVlO1xuICAgIHRoaXMubG9ja2VkID0gY29uZmlnLmxvY2tlZCAhPT0gdW5kZWZpbmVkID8gY29uZmlnLmxvY2tlZCA6IGZhbHNlO1xuICAgIHRoaXMudmFsdWUgPSB0aGlzLmRlZmF1bHQ7XG5cbiAgICB0aGlzLmNyZWF0ZURPTSgpO1xuICB9XG5cbiAgY3JlYXRlRE9NKCkge1xuICAgIHRoaXMuZG9tID0ge307XG5cbiAgICAvLyBjb250cm9sXG4gICAgdGhpcy5kb20uY29udHJvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZG9tLmNvbnRyb2wuY2xhc3NMaXN0LmFkZChgJHt0aGlzLnZhcmlhYm9hcmQubmFtZXNwYWNlfS1jb250cm9sYCk7XG5cbiAgICAvLyB0aXRsZVxuICAgIHRoaXMuZG9tLnRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICB0aGlzLmRvbS50aXRsZS5jbGFzc0xpc3QuYWRkKGAke3RoaXMudmFyaWFib2FyZC5uYW1lc3BhY2V9LWNvbnRyb2wtdGl0bGVgKTtcbiAgICB0aGlzLmRvbS50aXRsZS50ZXh0Q29udGVudCA9IHRoaXMudGl0bGU7XG4gICAgdGhpcy5kb20uY29udHJvbC5hcHBlbmRDaGlsZCh0aGlzLmRvbS50aXRsZSk7XG5cbiAgICAvLyB2YWx1ZVxuICAgIHRoaXMuZG9tLnZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB0aGlzLmRvbS52YWx1ZS5jbGFzc0xpc3QuYWRkKGAke3RoaXMudmFyaWFib2FyZC5uYW1lc3BhY2V9LWNvbnRyb2wtdmFsdWVgKTtcbiAgICB0aGlzLmRvbS5jb250cm9sLmFwcGVuZENoaWxkKHRoaXMuZG9tLnZhbHVlKTtcblxuICAgIC8vIGFkZCBjb250cm9sIHRvIHBhbmVsXG4gICAgdGhpcy52YXJpYWJvYXJkLmRvbS5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmRvbS5jb250cm9sKTtcbiAgfVxuXG4gIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxuXG4gIGxvY2soKSB7XG4gICAgdGhpcy5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgdW5sb2NrKCkge1xuICAgIHRoaXMubG9ja2VkID0gZmFsc2U7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2w7XG4iLCJjb25zdCBDb250cm9sID0gcmVxdWlyZSgnLi9jb250cm9sJyk7XG5jb25zdCBDYWxjID0gcmVxdWlyZSgnLi4vdXRpbC9jYWxjJyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgcmFuZ2UgY29udHJvbFxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSB2YXJpYWJvYXJkIC0gUmVmZXJlbmNlIHRvIHBhcmVudCBWYXJpYUJvYXJkIGluc3RhbmNlXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWcuaWQgLSBVbmlxdWUgaWQvc2x1Z1xuICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZy50aXRsZSAtIFVJIGRpc3BsYXkgdGl0bGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb25maWcubWluIC0gTWluaW11bSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGNvbmZpZy5tYXggLSBNYXhpbXVtIHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gY29uZmlnLnN0ZXAgLSBTdGVwIHNpemVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb25maWcuZGVmYXVsdCAtIFN0YXJ0aW5nIHZhbHVlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNvbmZpZy5yYW5kb21pemFibGUgLSBDYW4gYmUgcmFuZG9taXplZCBpbmRpdmlkdWFsbHkgYW5kIGJ5IHJhbmRvbWl6aW5nIGFsbFxuICogQHBhcmFtIHtib29sZWFufSBjb25maWcubXV0YWJsZSAtIENhbiBiZSBtdXRhdGVkIGluZGl2aWR1YWxseSBhbmQgYnkgbXV0YXRpbmcgYWxsXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNvbmZpZy5sb2NrZWQgLSBUZW1wb3JhcmlseSB0b2dnbGUgd2hldGhlciB0aGUgY29udHJvbCBpcyBhZmZlY3RlZCBieSByYW5kb21pemF0aW9uIGFuZCBtdXRhdGlvblxuICpcbiAqIEBleHRlbmRzIENvbnRyb2xcbiAqXG4gKiBAcmVxdWlyZXMge0BsaW5rIENvbnRyb2x9XG4gKiBAcmVxdWlyZXMge0BsaW5rIENhbGN9XG4gKi9cblxuY2xhc3MgUmFuZ2UgZXh0ZW5kcyBDb250cm9sIHtcblxuICBjb25zdHJ1Y3Rvcih2YXJpYWJvYXJkLCBjb25maWcpIHtcbiAgICBzdXBlcih2YXJpYWJvYXJkLCBjb25maWcpO1xuICAgIHRoaXMudHlwZSA9ICdyYW5nZSc7XG5cbiAgICB0aGlzLm1pbiA9IGNvbmZpZy5taW47XG4gICAgdGhpcy5tYXggPSBjb25maWcubWF4O1xuICAgIHRoaXMuc3RlcCA9IGNvbmZpZy5zdGVwICE9PSB1bmRlZmluZWQgPyBNYXRoLmFicyhjb25maWcuc3RlcCkgOiAxO1xuICAgIHRoaXMucGxhY2VzID0gdGhpcy5zdGVwLnRvU3RyaW5nKCkuaW5kZXhPZignLicpID4gLTEgPyB0aGlzLnN0ZXAudG9TdHJpbmcoKS5zcGxpdCgnLicpWzFdLmxlbmd0aCA6IDA7XG4gICAgdGhpcy52YWx1ZVRhcmdldCA9IHRoaXMudmFsdWU7XG5cbiAgICB0aGlzLm1vdXNlSXNEb3duID0gZmFsc2U7XG4gICAgdGhpcy5zZXR0bGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLmxpc3RlbigpO1xuXG4gICAgdGhpcy5zZXQodGhpcy52YWx1ZSk7XG4gIH1cblxuICBjcmVhdGVET00oKSB7XG4gICAgc3VwZXIuY3JlYXRlRE9NKCk7XG5cbiAgICAvLyByYW5nZVxuICAgIHRoaXMuZG9tLnJhbmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kb20ucmFuZ2UuY2xhc3NMaXN0LmFkZChgJHt0aGlzLnZhcmlhYm9hcmQubmFtZXNwYWNlfS1jb250cm9sLXJhbmdlYCk7XG5cbiAgICAvLyByYW5nZSBpbm5lclxuICAgIHRoaXMuZG9tLnJhbmdlSW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmRvbS5yYW5nZUlubmVyLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy52YXJpYWJvYXJkLm5hbWVzcGFjZX0tY29udHJvbC1yYW5nZS1pbm5lcmApO1xuICAgIHRoaXMuZG9tLnJhbmdlLmFwcGVuZENoaWxkKHRoaXMuZG9tLnJhbmdlSW5uZXIpO1xuICAgIFxuICAgIHRoaXMuZG9tLmNvbnRyb2wuYXBwZW5kQ2hpbGQodGhpcy5kb20ucmFuZ2UpO1xuICB9XG5cbiAgbGlzdGVuKCkge1xuICAgIHRoaXMuZG9tLnZhbHVlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB0aGlzLm9uVmFsdWVDaGFuZ2UoZSkpO1xuICAgIHRoaXMuZG9tLnJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB0aGlzLm9uVmFsdWVNb3VzZWRvd24oZSkpO1xuICB9XG5cbiAgb25WYWx1ZUNoYW5nZShlKSB7XG4gICAgdGhpcy5zZXQodGhpcy5kb20udmFsdWUudmFsdWUpO1xuICAgIHRoaXMudmFsdWVUYXJnZXQgPSB0aGlzLnZhbHVlO1xuICB9XG5cbiAgb25WYWx1ZU1vdXNlZG93bihlKSB7XG4gICAgdGhpcy52YXJpYWJvYXJkLm1vdXNlLmRvd24gPSB0cnVlO1xuICAgIHRoaXMudmFyaWFib2FyZC5tb3VzZS5hbmNob3IueCA9IGUuY2xpZW50WDtcbiAgICB0aGlzLnZhcmlhYm9hcmQubW91c2UuYW5jaG9yLnkgPSBlLmNsaWVudFk7XG4gICAgdGhpcy5tb3VzZUlzRG93biA9IHRydWU7XG4gICAgdGhpcy5zZXREcmFnVmFsdWUoKTtcbiAgfVxuXG4gIG9uV2luZG93TW91c2V1cChlKSB7XG4gICAgdGhpcy5tb3VzZUlzRG93biA9IGZhbHNlO1xuICB9XG5cbiAgb25XaW5kb3dNb3VzZW1vdmUoZSkge1xuICAgIGlmKHRoaXMubW91c2VJc0Rvd24pIHtcbiAgICAgIHRoaXMuc2V0RHJhZ1ZhbHVlKCk7XG4gICAgfVxuICB9XG5cbiAgcmFuZG9taXplKCkge1xuICAgIHRoaXMuc2V0dGxlZCA9IGZhbHNlO1xuICAgIHRoaXMudmFsdWVUYXJnZXQgPSBDYWxjLnJhbmQodGhpcy5taW4sIHRoaXMubWF4KTtcbiAgfVxuXG4gIG11dGF0ZSgpIHtcbiAgICBsZXQgc2l6ZSA9ICh0aGlzLm1heCAtIHRoaXMubWluKSAvIDE1O1xuICAgIHRoaXMuc2V0dGxlZCA9IGZhbHNlO1xuICAgIHRoaXMudmFsdWVUYXJnZXQgPSB0aGlzLmdldCgpICsgQ2FsYy5yYW5kKC1zaXplLCBzaXplKTtcbiAgfVxuXG4gIHNldERyYWdWYWx1ZSgpIHtcbiAgICBsZXQgbGVmdCA9IHRoaXMuZG9tLnJhbmdlLm9mZnNldExlZnQ7XG4gICAgbGV0IHdpZHRoID0gdGhpcy5kb20ucmFuZ2Uub2Zmc2V0V2lkdGg7XG4gICAgbGV0IHZhbCA9IENhbGMubWFwKHRoaXMudmFyaWFib2FyZC5tb3VzZS54LCBsZWZ0LCBsZWZ0ICsgd2lkdGgsIHRoaXMubWluLCB0aGlzLm1heCk7XG4gICAgdGhpcy5zZXQodmFsKTtcbiAgICB0aGlzLnZhbHVlVGFyZ2V0ID0gdGhpcy52YWx1ZTtcbiAgfVxuXG4gIGVhc2VTZXQoKSB7XG4gICAgaWYoTWF0aC5hYnModGhpcy52YWx1ZSAtIHRoaXMudmFsdWVUYXJnZXQpID4gdGhpcy5zdGVwIC8gMikge1xuICAgICAgdGhpcy52YWx1ZSArPSAodGhpcy52YWx1ZVRhcmdldCAtIHRoaXMudmFsdWUpICogMC4yO1xuICAgICAgdGhpcy5zZXQodGhpcy52YWx1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0dGxlZCA9IHRydWU7XG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZVRhcmdldDtcbiAgICAgIHRoaXMuc2V0KHRoaXMudmFsdWUpOyBcbiAgICB9XG4gIH1cblxuICBzZXQodmFsLCBieXBhc3NSb3VuZGluZykge1xuICAgIC8vIHNhbml0aXplIHZhbHVlXG4gICAgdmFsID0gcGFyc2VGbG9hdCh2YWwpO1xuICAgIHZhbCA9IGlzTmFOKHZhbCkgPyB0aGlzLmRlZmF1bHQgOiB2YWw7XG4gICAgdmFsID0gQ2FsYy5jbGFtcCh2YWwsIHRoaXMubWluLCB0aGlzLm1heCk7XG4gICAgdmFsID0gYnlwYXNzUm91bmRpbmcgPyB2YWwgOiBDYWxjLnJvdW5kVG9OZWFyZXN0SW50ZXJ2YWwodmFsLCB0aGlzLnN0ZXApO1xuICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gICAgXG4gICAgLy8gc2V0IGlucHV0IHZhbHVlXG4gICAgdGhpcy5kb20udmFsdWUudmFsdWUgPSB0aGlzLnZhbHVlLnRvRml4ZWQodGhpcy5wbGFjZXMpO1xuICAgIFxuICAgIC8vIHNldCByYW5nZSB2YWx1ZVxuICAgIHRoaXMuZG9tLnJhbmdlSW5uZXIuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlWCgke0NhbGMubWFwKHRoaXMudmFsdWUsIHRoaXMubWluLCB0aGlzLm1heCwgMCwgMSl9KWA7XG4gICAgXG4gICAgLy8gc2V0IHRoZSB0aXRsZSBhdHRyaWJ1dGUgZm9yIHRoZSBjb250cm9sXG4gICAgdGhpcy5kb20uY29udHJvbC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgYCR7dGhpcy50aXRsZX06ICR7dGhpcy52YWx1ZS50b0ZpeGVkKHRoaXMucGxhY2VzKX1gKTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmFuZ2U7XG4iLCJjb25zdCBCdXR0b24gPSByZXF1aXJlKCcuL2J1dHRvbicpO1xuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuL2NvbnRyb2xzL3JhbmdlJyk7XG5jb25zdCBDYWxjID0gcmVxdWlyZSgnLi91dGlsL2NhbGMnKTtcblxuY2xhc3MgVmFyaWFCb2FyZCB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIFZhcmlhQm9hcmQgY29udHJvbCBwYW5lbFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBvYmplY3RcbiAgICogQHBhcmFtIHtvYmplY3R8c3RyaW5nfSBbY29uZmlnLmNvbnRhaW5lcj1kb2N1bWVudC5ib2R5XSAtIERPTSBlbGVtZW50IG9yIENTUyBzZWxlY3RvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbmZpZy50aXRsZV0gLSBUaXRsZSBvZiB0aGUgcGFuZWxcbiAgICpcbiAgICogQHJlcXVpcmVzIHtAbGluayBCdXR0b259XG4gICAqIEByZXF1aXJlcyB7QGxpbmsgUmFuZ2V9XG4gICAqIEByZXF1aXJlcyB7QGxpbmsgQ2FsY31cbiAgICovXG5cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5uYW1lc3BhY2UgPSAndmFyaWFib2FyZCc7XG4gICAgdGhpcy5jb250cm9scyA9IHt9O1xuICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xuXG4gICAgdGhpcy5tb3VzZSA9IHtcbiAgICAgIGRvd246IGZhbHNlLFxuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBhbmNob3I6IHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMFxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgICB0aGlzLnJhZiA9IG51bGw7XG5cbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbmZpZy5jb250YWluZXIgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy5jb250YWluZXIgOiBkb2N1bWVudC5ib2R5O1xuICAgIHRoaXMudGl0bGUgPSBjb25maWcudGl0bGUgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy50aXRsZSA6IG51bGw7XG4gICAgXG4gICAgdGhpcy5jcmVhdGVET00oKTtcbiAgICB0aGlzLmxpc3RlbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBuZWNlc3NhcnkgRE9NIGVsZW1lbnRzXG4gICAqL1xuXG4gIGNyZWF0ZURPTSgpIHtcbiAgICB0aGlzLmRvbSA9IHt9O1xuXG4gICAgLy8gY29udGFpbmVyXG4gICAgdGhpcy5kb20uY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XG5cbiAgICAvLyBwYW5lbFxuICAgIHRoaXMuZG9tLnBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kb20ucGFuZWwuY2xhc3NMaXN0LmFkZChgJHt0aGlzLm5hbWVzcGFjZX0tcGFuZWxgKTtcblxuICAgIC8vIHRpdGxlXG4gICAgaWYodGhpcy50aXRsZSkge1xuICAgICAgdGhpcy5kb20udGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xuICAgICAgdGhpcy5kb20udGl0bGUuY2xhc3NMaXN0LmFkZChgJHt0aGlzLm5hbWVzcGFjZX0tdGl0bGVgKTtcbiAgICAgIHRoaXMuZG9tLnRpdGxlLnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcbiAgICAgIHRoaXMuZG9tLnBhbmVsLmFwcGVuZENoaWxkKHRoaXMuZG9tLnRpdGxlKTtcbiAgICB9XG5cbiAgICAvLyBjb250cm9sc1xuICAgIHRoaXMuZG9tLmNvbnRyb2xzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kb20uY29udHJvbHMuY2xhc3NMaXN0LmFkZChgJHt0aGlzLm5hbWVzcGFjZX0tY29udHJvbHNgKTtcbiAgICB0aGlzLmRvbS5wYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmRvbS5jb250cm9scyk7XG5cbiAgICAvLyBhZGQgcGFuZWwgdG8gY29udGFpbmVyXG4gICAgdGhpcy5kb20uY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZG9tLnBhbmVsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnNcbiAgICovXG5cbiAgbGlzdGVuKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGUpID0+IHRoaXMub25XaW5kb3dNb3VzZXVwKGUpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpID0+IHRoaXMub25XaW5kb3dNb3VzZW1vdmUoZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9uIHdpbmRvdyBtb3VzZSB1cCBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZSAtIEV2ZW50IG9iamVjdFxuICAgKi9cblxuICBvbldpbmRvd01vdXNldXAoZSkge1xuICAgIHRoaXMubW91c2UuZG93biA9IGZhbHNlO1xuICAgIGZvcihsZXQga2V5IGluIHRoaXMuY29udHJvbHMpIHtcbiAgICAgIGxldCBjb250cm9sID0gdGhpcy5jb250cm9sc1trZXldO1xuICAgICAgY29udHJvbC5vbldpbmRvd01vdXNldXAoZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9uIHdpbmRvdyBtb3VzZSBtb3ZlIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBlIC0gRXZlbnQgb2JqZWN0XG4gICAqL1xuXG4gIG9uV2luZG93TW91c2Vtb3ZlKGUpIHtcbiAgICB0aGlzLm1vdXNlLnggPSBlLmNsaWVudFg7XG4gICAgdGhpcy5tb3VzZS55ID0gZS5jbGllbnRZO1xuICAgIGZvcihsZXQga2V5IGluIHRoaXMuY29udHJvbHMpIHtcbiAgICAgIGxldCBjb250cm9sID0gdGhpcy5jb250cm9sc1trZXldO1xuICAgICAgY29udHJvbC5vbldpbmRvd01vdXNlbW92ZShlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGJhc2VkIG9uIHJlcXVlc3RBbmltYXRpb25GcmFtZSgpXG4gICAqL1xuXG4gIHVwZGF0ZSgpIHtcbiAgICB0aGlzLm5lZWRzVXBkYXRlID0gZmFsc2U7XG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5jb250cm9scykge1xuICAgICAgaWYodGhpcy5jb250cm9sc1trZXldLnR5cGUgPT09ICdyYW5nZScpIHtcbiAgICAgICAgdGhpcy5jb250cm9sc1trZXldLmVhc2VTZXQoKTtcbiAgICAgICAgaWYoIXRoaXMuY29udHJvbHNba2V5XS5zZXR0bGVkKSB7XG4gICAgICAgICAgdGhpcy5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih0aGlzLm5lZWRzVXBkYXRlKSB7XG4gICAgICB0aGlzLnJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnVwZGF0ZSgpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgYnV0dG9uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSBDb25maWd1cmF0aW9uIG9iamVjdFxuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnLmlkIC0gSUQgc2x1Z1xuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnLnRpdGxlIC0gVGl0bGUgdGV4dFxuICAgKiBAcGFyYW0ge29iamVjdH0gW2NvbmZpZy5jYWxsYmFjaz0oKSA9PiB7fV0gLSBDYWxsYmFjayBmdW5jdGlvbiBmb3IgYnV0dG9uIHByZXNzXG4gICAqXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IEJ1dHRvbiBvYmplY3RcbiAgICovXG5cbiAgYWRkQnV0dG9uKGNvbmZpZykge1xuICAgIHRoaXMuYnV0dG9uc1tjb25maWcuaWRdID0gbmV3IEJ1dHRvbih0aGlzLCBjb25maWcpO1xuICAgIHJldHVybiB0aGlzLmJ1dHRvbnNbY29uZmlnLmlkXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSByYW5nZSBjb250cm9sIHZpYSB7QGxpbmtjb2RlIFJhbmdlfVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZy5pZCAtIFVuaXF1ZSBpZC9zbHVnXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWcudGl0bGUgLSBVSSBkaXNwbGF5IHRpdGxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb25maWcubWluIC0gTWluaW11bSB2YWx1ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gY29uZmlnLm1heCAtIE1heGltdW0gdmFsdWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvbmZpZy5zdGVwIC0gU3RlcCBzaXplXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb25maWcuZGVmYXVsdCAtIFN0YXJ0aW5nIHZhbHVlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29uZmlnLnJhbmRvbWl6YWJsZSAtIENhbiBiZSByYW5kb21pemVkIGluZGl2aWR1YWxseSBhbmQgYnkgcmFuZG9taXppbmcgYWxsXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29uZmlnLm11dGFibGUgLSBDYW4gYmUgbXV0YXRlZCBpbmRpdmlkdWFsbHkgYW5kIGJ5IG11dGF0aW5nIGFsbFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbmZpZy5sb2NrZWQgLSBUZW1wb3JhcmlseSB0b2dnbGUgd2hldGhlciB0aGUgY29udHJvbCBpcyBhZmZlY3RlZCBieSByYW5kb21pemF0aW9uIGFuZCBtdXRhdGlvblxuICAgKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBSYW5nZSBvYmplY3RcbiAgICovXG5cbiAgYWRkUmFuZ2UoY29uZmlnKSB7XG4gICAgdGhpcy5jb250cm9sc1tjb25maWcuaWRdID0gbmV3IFJhbmdlKHRoaXMsIGNvbmZpZyk7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbHNbY29uZmlnLmlkXTtcbiAgfVxuXG4gIGdldChpZCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xzW2lkXS5nZXQoKTtcbiAgfVxuXG4gIHJhbmRvbWl6ZSgpIHtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLmNvbnRyb2xzKSB7XG4gICAgICB0aGlzLmNvbnRyb2xzW2tleV0ucmFuZG9taXplKCk7XG4gICAgfVxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgbXV0YXRlKCkge1xuICAgIGZvcihsZXQga2V5IGluIHRoaXMuY29udHJvbHMpIHtcbiAgICAgIHRoaXMuY29udHJvbHNba2V5XS5tdXRhdGUoKTtcbiAgICB9XG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yYWYpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZhcmlhQm9hcmQ7XG4iLCIvKipcbiAqIENhbGN1bGF0aW9uIGZ1bmN0aW9ucyBhbmQgaGVscGVyc1xuICovXG5cbmNsYXNzIENhbGMge1xuXG4gIC8qKlxuICAqIEdldCBhIHJhbmRvbSBmbG9hdCB3aXRoaW4gYSByYW5nZS4gSWYgb25seSBvbmUgYXJndW1lbnQgaXMgcGFzc2VkLCBpdCBpcyB1c2VkIGFzIHRoZSBtYXggYW5kIHRoZSBtaW4gYmVjb21lcyB6ZXJvLlxuICAqXG4gICogQHBhcmFtIHtudW1iZXJ9IG1pbiAtIE1pbmltdW0gcmFuZ2UgdmFsdWVcbiAgKiBAcGFyYW0ge251bWJlcn0gbWF4IC0gTWF4aW11bSByYW5nZSB2YWx1ZVxuICAqXG4gICogQGV4YW1wbGVcbiAgKiAvLyB0d28gYXJndW1lbnRzXG4gICogQ2FsYy5yYW5kKDIsIDE4KTtcbiAgKiAvLyAtPiByYW5kb20gZmxvYXQgYmV0d2VlbiAyIGFuZCAxOFxuICAqXG4gICogLy8gc2luZ2xlIGFyZ3VtZW50XG4gICogQ2FsYy5yYW5kKDQyLjUpO1xuICAqIC8vIC0+IHJhbmRvbSBmbG9hdCBiZXR3ZWVuIDAgYW5kIDQyLjVcbiAgKlxuICAqIEByZXR1cm5zIHtudW1iZXJ9IFJhbmRvbSBmbG9hdCB3aXRoaW4gdGhlIHJhbmdlXG4gICovXG4gIHN0YXRpYyByYW5kKG1pbiwgbWF4KSB7XG4gICAgaWYobWF4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG1heCA9IG1pbjtcbiAgICAgIG1pbiA9IDA7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG4gIH1cblxuICAvKipcbiAgKiBDbGFtcCBhIHZhbHVlIHRvIGEgcmFuZ2VcbiAgKlxuICAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgLSBJbnB1dCB2YWx1ZVxuICAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gLSBNaW5pbXVtIHJhbmdlIHZhbHVlXG4gICogQHBhcmFtIHtudW1iZXJ9IG1heCAtIE1heGltdW0gcmFuZ2UgdmFsdWVcbiAgKlxuICAqIEBleGFtcGxlXG4gICogQ2FsYy5jbGFtcCgzLCAxMCwgMTUwKTtcbiAgKiAvLyAtPiAxMFxuICAqXG4gICogQ2FsYy5jbGFtcCg0MDAsIDEwLCAxNTApO1xuICAqIC8vIC0+IDE1MFxuICAqXG4gICogQ2FsYy5jbGFtcCg3NSwgMTAsIDEwMCk7XG4gICogLy8gLT4gNzVcbiAgKlxuICAqIEByZXR1cm5zIHtudW1iZXJ9IENsYW1wZWQgdmFsdWUgd2l0aGluIHJhbmdlXG4gICovXG5cbiAgc3RhdGljIGNsYW1wKHZhbCwgbWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odmFsLCBtYXgpLCBtaW4pO1xuICB9XG5cbiAgc3RhdGljIG1hcCh2YWwsIGluTWluLCBpbk1heCwgb3V0TWluLCBvdXRNYXgpIHtcbiAgICByZXR1cm4gKChvdXRNYXggLSBvdXRNaW4pICogKCh2YWwgLSBpbk1pbikgLyAoaW5NYXggLSBpbk1pbikpKSArIG91dE1pbjtcbiAgfVxuXG4gIHN0YXRpYyByb3VuZFRvTmVhcmVzdEludGVydmFsKHZhbHVlLCBpbnRlcnZhbCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlIC8gaW50ZXJ2YWwpICogaW50ZXJ2YWw7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENhbGM7XG4iXX0="}